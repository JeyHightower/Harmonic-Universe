[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --cov=app --cov-report=term-missing
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
env =
    FLASK_ENV=testing
    DATABASE_URL=sqlite:///test.db
    SECRET_KEY=test-key
    JWT_SECRET_KEY=test-jwt-key

# Configure test categories
markers =
    unit: marks tests as unit tests
    integration: marks tests as integration tests
    e2e: marks tests as end-to-end tests
    api: marks tests as API tests
    db: marks tests as database tests
    websocket: marks tests as WebSocket tests
    auth: marks tests as authentication tests
    universe: marks tests as universe tests
    physics: marks tests as physics tests
    audio: marks tests as audio tests
    performance: marks tests as performance tests
    security: marks tests as security tests

# Coverage configuration
[coverage:run]
source = app
omit =
    */tests/*
    */migrations/*
    */venv/*
    */site-packages/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise NotImplementedError
    if __name__ == .__main__.:
    pass
    raise NotImplemented
