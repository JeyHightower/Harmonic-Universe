{"version":3,"file":"Home-71120cdc.js","sources":["../../src/utils/react-safety-patch.jsx","../../src/utils/api.js","../../src/features/home/Home.jsx"],"sourcesContent":["import React from 'react';\n\n// Safety patch for React components\nexport const withSafetyWrapper = (Component) => {\n    return class SafetyWrapper extends React.Component {\n        state = { hasError: false, error: null };\n\n        static getDerivedStateFromError(error) {\n            return { hasError: true, error };\n        }\n\n        componentDidCatch(error, info) {\n            console.error('Component Error:', error);\n            console.error('Error Info:', info);\n        }\n\n        render() {\n            if (this.state.hasError) {\n                return (\n                    <div className=\"error-boundary\">\n                        <h2>Something went wrong.</h2>\n                        <details>\n                            <summary>Error Details</summary>\n                            <pre>{this.state.error?.toString()}</pre>\n                        </details>\n                    </div>\n                );\n            }\n\n            return <Component {...this.props} />;\n        }\n    };\n};\n\n// Safe state hook\nexport const useSafeState = (initialState) => {\n    const mounted = React.useRef(false);\n    const [state, setState] = React.useState(initialState);\n\n    React.useEffect(() => {\n        mounted.current = true;\n        return () => {\n            mounted.current = false;\n        };\n    }, []);\n\n    const setSafeState = React.useCallback((value) => {\n        if (mounted.current) {\n            setState(value);\n        }\n    }, []);\n\n    return [state, setSafeState];\n};\n\n// Safe effect hook\nexport const useSafeEffect = (effect, deps) => {\n    const mounted = React.useRef(false);\n\n    React.useEffect(() => {\n        mounted.current = true;\n        let cleanup;\n\n        if (mounted.current) {\n            cleanup = effect();\n        }\n\n        return () => {\n            mounted.current = false;\n            if (cleanup && typeof cleanup === 'function') {\n                cleanup();\n            }\n        };\n    }, deps);\n};\n\nexport default {\n    withSafetyWrapper,\n    useSafeState,\n    useSafeEffect\n};\n","import axios from 'axios';\n\nconst API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n\n// Create axios instance with base configuration\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor for adding auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for handling errors\napi.interceptors.response.use(\n  (response) => response,\n  async (error) => {\n    if (error.response?.status === 401) {\n      // Handle token refresh or logout\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// API endpoints\nexport const endpoints = {\n  auth: {\n    login: '/auth/login',\n    register: '/auth/register',\n    logout: '/auth/logout'\n  },\n  user: {\n    profile: '/user/profile',\n    settings: '/user/settings'\n  },\n  universes: {\n    list: '/universes',\n    create: '/universes',\n    get: (id) => `/universes/${id}`,\n    update: (id) => `/universes/${id}`,\n    delete: (id) => `/universes/${id}`\n  }\n};\n\n// API methods\nexport const apiClient = {\n  // Auth methods\n  login: (credentials) => api.post(endpoints.auth.login, credentials),\n  register: (userData) => api.post(endpoints.auth.register, userData),\n  logout: () => api.post(endpoints.auth.logout),\n\n  // User methods\n  getUserProfile: () => api.get(endpoints.user.profile),\n  updateUserProfile: (data) => api.put(endpoints.user.profile, data),\n  updateUserSettings: (settings) => api.put(endpoints.user.settings, settings),\n\n  // Universe methods\n  getUniverses: () => api.get(endpoints.universes.list),\n  createUniverse: (data) => api.post(endpoints.universes.create, data),\n  getUniverse: (id) => api.get(endpoints.universes.get(id)),\n  updateUniverse: (id, data) => api.put(endpoints.universes.update(id), data),\n  deleteUniverse: (id) => api.delete(endpoints.universes.delete(id))\n};\n\nexport default apiClient;\n","import React from 'react';\nimport { useSafeState } from '../../utils/react-safety-patch.jsx';\nimport apiClient from '../../utils/api';\n\nconst Home = () => {\n  const [universes, setUniverses] = useSafeState([]);\n  const [loading, setLoading] = useSafeState(true);\n  const [error, setError] = useSafeState(null);\n\n  React.useEffect(() => {\n    const fetchUniverses = async () => {\n      try {\n        const response = await apiClient.getUniverses();\n        setUniverses(response.data);\n        setError(null);\n      } catch (err) {\n        setError('Failed to load universes');\n        console.error('Error fetching universes:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUniverses();\n  }, []);\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  return (\n    <div className=\"home\">\n      <h1>Welcome to Harmonic Universe</h1>\n      <div className=\"universes-list\">\n        {universes.length === 0 ? (\n          <p>No universes found. Create your first one!</p>\n        ) : (\n          universes.map((universe) => (\n            <div key={universe.id} className=\"universe-card\">\n              <h3>{universe.name}</h3>\n              <p>{universe.description}</p>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"],"names":["useSafeState","initialState","mounted","React","state","setState","setSafeState","value","API_BASE_URL","api","axios","config","token","error","response","_a","endpoints","id","apiClient","credentials","userData","data","settings","Home","universes","setUniverses","loading","setLoading","setError","err","jsxDEV","this","universe"],"mappings":"uFAmCa,MAAAA,EAAgBC,GAAiB,CACpC,MAAAC,EAAUC,EAAM,OAAO,EAAK,EAC5B,CAACC,EAAOC,CAAQ,EAAIF,EAAM,SAASF,CAAY,EAErDE,EAAM,UAAU,KACZD,EAAQ,QAAU,GACX,IAAM,CACTA,EAAQ,QAAU,EAAA,GAEvB,CAAE,CAAA,EAEL,MAAMI,EAAeH,EAAM,YAAaI,GAAU,CAC1CL,EAAQ,SACRG,EAASE,CAAK,CAEtB,EAAG,CAAE,CAAA,EAEE,MAAA,CAACH,EAAOE,CAAY,CAC/B,ECnDME,EAAe,wBAGfC,EAAMC,EAAM,OAAO,CACvB,QAASF,EACT,QAAS,CACP,eAAgB,kBACjB,CACH,CAAC,EAGDC,EAAI,aAAa,QAAQ,IACtBE,GAAW,CACV,MAAMC,EAAQ,aAAa,QAAQ,OAAO,EAC1C,OAAIA,IACFD,EAAO,QAAQ,cAAgB,UAAUC,CAAK,IAEzCD,CACR,EACAE,GACQ,QAAQ,OAAOA,CAAK,CAE/B,EAGAJ,EAAI,aAAa,SAAS,IACvBK,GAAaA,EACd,MAAOD,GAAU,OACf,QAAIE,EAAAF,EAAM,WAAN,YAAAE,EAAgB,UAAW,MAE7B,aAAa,WAAW,OAAO,EAC/B,OAAO,SAAS,KAAO,UAElB,QAAQ,OAAOF,CAAK,CAC5B,CACH,EAGO,MAAMG,EAAY,CACvB,KAAM,CACJ,MAAO,cACP,SAAU,iBACV,OAAQ,cACT,EACD,KAAM,CACJ,QAAS,gBACT,SAAU,gBACX,EACD,UAAW,CACT,KAAM,aACN,OAAQ,aACR,IAAMC,GAAO,cAAcA,CAAE,GAC7B,OAASA,GAAO,cAAcA,CAAE,GAChC,OAASA,GAAO,cAAcA,CAAE,EACjC,CACH,EAGaC,EAAY,CAEvB,MAAQC,GAAgBV,EAAI,KAAKO,EAAU,KAAK,MAAOG,CAAW,EAClE,SAAWC,GAAaX,EAAI,KAAKO,EAAU,KAAK,SAAUI,CAAQ,EAClE,OAAQ,IAAMX,EAAI,KAAKO,EAAU,KAAK,MAAM,EAG5C,eAAgB,IAAMP,EAAI,IAAIO,EAAU,KAAK,OAAO,EACpD,kBAAoBK,GAASZ,EAAI,IAAIO,EAAU,KAAK,QAASK,CAAI,EACjE,mBAAqBC,GAAab,EAAI,IAAIO,EAAU,KAAK,SAAUM,CAAQ,EAG3E,aAAc,IAAMb,EAAI,IAAIO,EAAU,UAAU,IAAI,EACpD,eAAiBK,GAASZ,EAAI,KAAKO,EAAU,UAAU,OAAQK,CAAI,EACnE,YAAcJ,GAAOR,EAAI,IAAIO,EAAU,UAAU,IAAIC,CAAE,CAAC,EACxD,eAAgB,CAACA,EAAII,IAASZ,EAAI,IAAIO,EAAU,UAAU,OAAOC,CAAE,EAAGI,CAAI,EAC1E,eAAiBJ,GAAOR,EAAI,OAAOO,EAAU,UAAU,OAAOC,CAAE,CAAC,CACnE,ECzEMM,EAAO,IAAM,CACjB,KAAM,CAACC,EAAWC,CAAY,EAAIzB,EAAa,CAAE,CAAA,EAC3C,CAAC0B,EAASC,CAAU,EAAI3B,EAAa,EAAI,EACzC,CAACa,EAAOe,CAAQ,EAAI5B,EAAa,IAAI,EAmBvC,OAjBJG,EAAM,UAAU,IAAM,EACG,SAAY,CAC7B,GAAA,CACI,MAAAW,EAAW,MAAMI,EAAU,eACjCO,EAAaX,EAAS,IAAI,EAC1Bc,EAAS,IAAI,QACNC,EAAK,CACZD,EAAS,0BAA0B,EAC3B,QAAA,MAAM,4BAA6BC,CAAG,CAAA,QAC9C,CACAF,EAAW,EAAK,CAClB,CAAA,IAIJ,EAAG,CAAE,CAAA,EAEDD,EAAgBI,EAAAA,OAAC,OAAI,SAAL,cAAA,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,EAAe,EAAAC,UAAA,EAC/BlB,WAAe,MAAI,CAAA,SAAA,CAAA,UAAQA,CAAA,GAAb,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,EAAmB,EAAAkB,UAAA,EAGnCD,EAAA,OAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAAAA,EAAA,OAAC,MAAG,SAAJ,8BAAA,EAAA,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,CAAgC,EAAAC,UAAA,EAChCD,EAAA,OAAC,OAAI,UAAU,iBACZ,WAAU,SAAW,EACnBA,EAAA,OAAA,IAAA,CAAE,SAAH,4CAAA,EAAA,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,EAA6C,EAAAC,UAAA,EAE7CP,EAAU,IAAKQ,GACZF,EAAA,OAAA,MAAA,CAAsB,UAAU,gBAC/B,SAAA,CAACA,SAAA,KAAA,CAAI,WAAS,MAAd,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,EAAmB,EAAAC,UAAA,EACnBD,SAAC,IAAG,CAAA,SAAAE,EAAS,aAAb,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,EAAyB,EAAAD,UAAA,CAAA,GAFjBC,EAAS,GAAnB,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,EAAA,EAAAD,UAGA,CACD,CATL,EAAA,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,CAWA,EAAAA,UAAA,CAAA,GAbF,OAAA,GAAA,CAAA,SAAA,mHAAA,WAAA,GAAA,aAAA,CAcA,EAAAA,UAAA,CAEJ"}