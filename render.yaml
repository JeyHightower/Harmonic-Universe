# Exported from Render on 2025-04-08T01:29:23Z
services:
  - type: web
    name: Harmonic-Universe
    runtime: python
    repo: https://github.com/JeyHightower/Harmonic-Universe
    branch: deploy-2
    plan: free
    envVars:
      - key: SCHEMA
        sync: false
      - key: FLASK_APP
        value: "backend/wsgi.py"
      - key: DATABASE_URL
        sync: false
      - key: PYTHONPATH
        value: "."
      - key: PYTHON_VERSION
        sync: false
      - key: PORT
        sync: false
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: LOG_LEVEL
        value: "INFO"
      - key: FLASK_ENV
        value: "production"
      - key: JWT_SECRET_KEY
        sync: false
      - key: SECRET_KEY
        sync: false
      - key: STATIC_URL_PATH
        value: "/"
      - key: STATIC_FOLDER
        value: "backend/static"
      - key: NODE_VERSION
        value: "18.16.0"
      - key: VITE_API_URL
        value: "https://harmonic-universe-z5ka.onrender.com/api"
    region: ohio
    buildCommand: |
      # Install dependencies
      npm install

      # Build the frontend
      npm run build

      # Install Python dependencies
      pip install -r backend/requirements.txt

      # Run database migrations if needed
      if [ -d "migrations" ]; then
        flask db upgrade
      fi

      # Seed the database if needed
      if [ -d "backend/seeds" ]; then
        flask seed all
      fi
    startCommand: |
      cd backend && gunicorn --worker-class eventlet -w 1 wsgi:app
version: "1"
