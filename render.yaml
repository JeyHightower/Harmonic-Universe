services:
  - type: web
    name: harmonic-universe
    env: python
    buildCommand: |
      cd backend && \
      pip install -r requirements.txt && \
      python -c "from app import db; db.create_all()" && \
      cd ../frontend && \
      npm install && \
      npm run build
    startCommand: cd backend && gunicorn app:app
    envVars:
      - fromGroup: harmonic-universe-env
    healthCheckPath: /api/health
    autoDeploy: true

databases:
  - name: harmonic_universe_db
    plan: free

envVarGroups:
  - name: harmonic-universe-env 