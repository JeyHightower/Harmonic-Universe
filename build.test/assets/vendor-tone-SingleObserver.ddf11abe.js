import{t as e,v as t,w as r,x as n,i as o}from"./vendor-tone-esm.8edb30e2.js";import{_ as i}from"./vendor-tone-type.9e20d569.js";import{al as u,au as a,av as f,aw as s,ax as c,ay as h}from"./vendor-tone-util.a79eb63f.js";import{r as l}from"./vendor-react-core.73efc664.js";import{d}from"./vendor-tone-es.9387ac1c.js";var v=function(o){e(u,o);var i=t(u);function u(){return r(this,u),i.apply(this,arguments)}return n(u,[{key:"render",value:function(){return this.props.children}}]),u}(l.Component);function m(e,t){var r=e.children,n=e.disabled,m=l.useRef(null),p=l.useRef(null),g=l.useContext(d),R="function"==typeof r,w=R?r(m):r,j=l.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),H=!R&&l.isValidElement(w)&&u(w),y=H?a(w):null,E=f(y,m),W=function(){var e;return h(m.current)||(m.current&&"object"===i(m.current)?h(null===(e=m.current)||void 0===e?void 0:e.nativeElement):null)||h(p.current)};l.useImperativeHandle(t,(function(){return W()}));var x=l.useRef(e);x.current=e;var C=l.useCallback((function(e){var t=x.current,r=t.onResize,n=t.data,i=e.getBoundingClientRect(),u=i.width,a=i.height,f=e.offsetWidth,s=e.offsetHeight,c=Math.floor(u),h=Math.floor(a);if(j.current.width!==c||j.current.height!==h||j.current.offsetWidth!==f||j.current.offsetHeight!==s){var l={width:c,height:h,offsetWidth:f,offsetHeight:s};j.current=l;var d=f===Math.round(u)?u:f,v=s===Math.round(a)?a:s,m=o(o({},l),{},{offsetWidth:d,offsetHeight:v});null==g||g(m,e,n),r&&Promise.resolve().then((function(){r(m,e)}))}}),[]);return l.useEffect((function(){var e=W();return e&&!n&&s(e,C),function(){return c(e,C)}}),[m.current,n]),l.createElement(v,{ref:p},H?l.cloneElement(w,{ref:E}):w)}var p=l.forwardRef(m);export{p as R};
