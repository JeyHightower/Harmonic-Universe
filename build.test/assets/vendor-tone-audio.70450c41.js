import{g as e,d as t,A as n,w as o,c as r,a,b as i,e as s,f as c,h as l,i as u,j as h}from"./vendor-tone-events.9afa7530.js";import{i as d,a as p,w as f,b as m,c as v,d as g,e as C,f as w,g as y,h as M,j as O,k as _,l as b,m as A,n as x,o as I,p as N,t as T,q as D,r as E,s as k,u as P,v as F,x as R,y as W,z as S,A as L,B as V,C as q}from"./vendor-tone-source.0b4b1ccd.js";const j=new WeakSet,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,z=new WeakMap,B=new WeakMap,G=new WeakMap,Q=new WeakMap,U=new WeakMap,$=new WeakMap,H={construct:()=>H},J=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,K=(e,t)=>{const n=[];let o=e.replace(/^[\s]+/,""),r=o.match(J);for(;null!==r;){const e=r[1].slice(1,-1),a=r[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(a),o=o.slice(r[0].length).replace(/^[\s]+/,""),r=o.match(J)}return[n.join(";"),o]},ee=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},te=e=>{if(!(e=>{try{new new Proxy(e,H)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},ne=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},oe=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[o]=n;return e.delete(o),o},re=(e,t,n,o)=>{const r=ne(e,t),a=oe(r,(e=>e[0]===n&&e[1]===o));return 0===r.size&&e.delete(t),a},ae=t=>{if(j.has(t))throw new Error("The AudioNode is already stored.");j.add(t),e(t).forEach((e=>e(!0)))},ie=e=>"port"in e,se=t=>{if(!j.has(t))throw new Error("The AudioNode is not stored.");j.delete(t),e(t).forEach((e=>e(!1)))},ce=(e,t)=>{!ie(e)&&t.every((e=>0===e.size))&&se(e)},le={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ue=(e,t)=>e.context===t,he=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},de=()=>new DOMException("","IndexSizeError"),pe=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(o){if(12===o.code)throw de();throw o}})},fe={numberOfChannels:1},me=-34028234663852886e22,ve=-me,ge=e=>j.has(e),Ce=e=>ne(X,e),we=e=>ne(Z,e),ye=(e,t)=>{const{activeInputs:n}=Ce(e);n.forEach((n=>n.forEach((([n])=>{t.includes(e)||ye(n,[...t,e])}))));const o=d(e)?[e.playbackRate]:ie(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:p(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const r of o){const e=we(r);void 0!==e&&e.activeInputs.forEach((([e])=>ye(e,t)))}ge(e)&&se(e)},Me=e=>{ye(e.destination,[])},Oe=e=>"context"in e,_e=e=>Oe(e[0]),be=(e,t,n,o)=>{for(const r of e)if(n(r)){if(o)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},Ae=(e,t,[n,o],r)=>{be(e,[t,n,o],(e=>e[0]===t&&e[1]===n),r)},xe=(e,[t,n,o],r)=>{const a=e.get(t);void 0===a?e.set(t,new Set([[n,o]])):be(a,[n,o],(e=>e[0]===n),r)},Ie=e=>"inputs"in e,Ne=(e,t,n,o)=>{if(Ie(t)){const r=t.inputs[o];return e.connect(r,n,0),[r,n,0]}return e.connect(t,n,o),[t,n,o]},Te=(e,t,n)=>{for(const o of e)if(o[0]===t&&o[1]===n)return e.delete(o),o;return null},De=(e,t,n)=>{const o=ne(e,t),r=oe(o,(e=>e[0]===n));return 0===o.size&&e.delete(t),r},Ee=(e,t,n,o)=>{Ie(t)?e.disconnect(t.inputs[o],n,0):e.disconnect(t,n,o)},ke=e=>ne(Y,e),Pe=e=>ne(z,e),Fe=e=>Q.has(e),Re=e=>!j.has(e),We=(e,t)=>new Promise((n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),o=e.createGain(),r=e.createBuffer(1,2,44100),a=r.getChannelData(0);a[0]=1,a[1]=1;const i=e.createBufferSource();i.buffer=r,i.loop=!0,i.connect(t).connect(e.destination),i.connect(o),i.disconnect(o),t.onaudioprocess=o=>{const r=o.inputBuffer.getChannelData(0);Array.prototype.some.call(r,(e=>1===e))?n(!0):n(!1),i.stop(),t.onaudioprocess=null,i.disconnect(t),t.disconnect(e.destination)},i.start()}})),Se=(e,t)=>{const n=new Map;for(const o of e)for(const e of o){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach(((e,n)=>t(n,e)))},Le=e=>"context"in e,Ve=(t,n,o,r)=>{const{activeInputs:a,passiveInputs:i}=we(n),{outputs:s}=Ce(t),c=e(t),l=e=>{const s=ke(t),c=Pe(n);if(e){const e=De(i,t,o);Ae(a,t,e,!1),r||Fe(t)||s.connect(c,o)}else{const e=((e,t,n)=>oe(e,(e=>e[0]===t&&e[1]===n)))(a,t,o);xe(i,e,!1),r||Fe(t)||s.disconnect(c,o)}};return!!be(s,[n,o],(e=>e[0]===n&&e[1]===o),!0)&&(c.add(l),ge(t)?Ae(a,t,[o,l],!0):xe(i,[t,o,l],!0),!0)},qe=(e,n,o,r,a)=>{const[i,s]=((e,t,n,o)=>{const{activeInputs:r,passiveInputs:a}=Ce(t),i=Te(r[o],e,n);if(null===i)return[re(a,e,n,o)[2],!1];return[i[2],!0]})(e,o,r,a);if(null!==i&&(t(e,i),!s||n||Fe(e)||Ee(ke(e),ke(o),r,a)),ge(o)){const{activeInputs:e}=Ce(o);ce(o,e)}},je=(e,n,o,r)=>{const[a,i]=((e,t,n)=>{const{activeInputs:o,passiveInputs:r}=we(t),a=Te(o,e,n);if(null===a)return[De(r,e,n)[1],!1];return[a[2],!0]})(e,o,r);null!==a&&(t(e,a),!i||n||Fe(e)||ke(e).disconnect(Pe(o),r))};class Xe{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach(((n,o)=>e.call(t,n,o,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Ye={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Ze(e,t,n,o,r){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],o,r);else{const a=e.getChannelData(o);if(0===t[n].byteLength)t[n]=a.slice(r,r+128);else{const e=new Float32Array(a.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const ze=(e,t,n,o,r)=>{"function"==typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],o,r):0!==t[n].byteLength&&e.getChannelData(o).set(t[n],r)},Be=(e,t)=>{const n=[];for(let o=0;o<e;o+=1){const e=[],r="number"==typeof t?t:t[o];for(let t=0;t<r;t+=1)e.push(new Float32Array(128));n.push(e)}return n},Ge=async(e,t,n,o,r,a,i)=>{const s=null===t?128*Math.ceil(e.context.length/128):t.length,c=o.channelCount*o.numberOfInputs,l=r.reduce(((e,t)=>e+t),0),u=0===l?null:n.createBuffer(l,s,n.sampleRate);if(void 0===a)throw new Error("Missing the processor constructor.");const h=Ce(e),d=await((e,t)=>{const n=ne($,e),o=ke(t);return ne(n,o)})(n,e),p=Be(o.numberOfInputs,o.channelCount),f=Be(o.numberOfOutputs,r),m=Array.from(e.parameters.keys()).reduce(((e,t)=>({...e,[t]:new Float32Array(128)})),{});for(let g=0;g<s;g+=128){if(o.numberOfInputs>0&&null!==t)for(let e=0;e<o.numberOfInputs;e+=1)for(let n=0;n<o.channelCount;n+=1)Ze(t,p[e],n,n,g);void 0!==a.parameterDescriptors&&null!==t&&a.parameterDescriptors.forEach((({name:e},n)=>{Ze(t,m,e,c+n,g)}));for(let e=0;e<o.numberOfInputs;e+=1)for(let t=0;t<r[e];t+=1)0===f[e][t].byteLength&&(f[e][t]=new Float32Array(128));try{const e=p.map(((e,t)=>0===h.activeInputs[t].size?[]:e)),t=i(g/n.sampleRate,n.sampleRate,(()=>d.process(e,f,m)));if(null!==u)for(let n=0,a=0;n<o.numberOfOutputs;n+=1){for(let e=0;e<r[n];e+=1)ze(u,f[n],e,a+e,g);a+=r[n]}if(!t)break}catch(v){e.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},Qe={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Ue={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},$e={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},He={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Je=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise((o=>{const r=()=>{n.onmessage=null,t.close(),n.close(),o()};n.onmessage=()=>r();try{t.postMessage(e,[e])}catch{}finally{r()}}))},Ke={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},et=(e,t,n)=>{const o=t[n];if(void 0===o)throw e();return o},tt={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},nt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},ot=()=>new DOMException("","InvalidStateError"),rt=()=>new DOMException("","InvalidAccessError"),at={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},it=(e,t,n,o,r,a,i,s,c,l,u)=>{const h=l.length;let d=s;for(let p=0;p<h;p+=1){let s=n[0]*l[p];for(let t=1;t<r;t+=1){const o=d-t&c-1;s+=n[t]*a[o],s-=e[t]*i[o]}for(let e=r;e<o;e+=1)s+=n[e]*a[d-e&c-1];for(let n=r;n<t;n+=1)s-=e[n]*i[d-n&c-1];a[d]=l[p],i[d]=s,d=d+1&c-1,u[p]=s}return d},st={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ct=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},lt=(e,t,n)=>{const o=t[n];void 0!==o&&o!==e[n]&&(e[n]=o)},ut=(e,t)=>{lt(e,t,"channelCount"),lt(e,t,"channelCountMode"),lt(e,t,"channelInterpretation")},ht=e=>"function"==typeof e.getFloatTimeDomainData,dt=(e,t,n)=>{const o=t[n];void 0!==o&&o!==e[n].value&&(e[n].value=o)},pt=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),ft=async(e,t)=>{const n=await(e=>new Promise(((t,n)=>{const{port1:o,port2:r}=new MessageChannel;o.onmessage=({data:e})=>{o.close(),r.close(),t(e)},o.onmessageerror=({data:e})=>{o.close(),r.close(),n(e)},r.postMessage(e)})))(t);return new e(n)},mt=(e,t)=>{const n=e.createBiquadFilter();return ut(n,t),dt(n,t,"Q"),dt(n,t,"detune"),dt(n,t,"frequency"),dt(n,t,"gain"),lt(n,t,"type"),n},vt=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return ut(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw ot()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw ot()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw ot()}})})(n),n},gt=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Ct=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return ut(n,t),dt(n,t,"delayTime"),n},wt=(e,t)=>{const n=e.createGain();return ut(n,t),dt(n,t,"gain"),n};function yt(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function Mt(e,t){let n=[0,0];for(let a=e.length-1;a>=0;a-=1)r=t,n=[(o=n)[0]*r[0]-o[1]*r[1],o[0]*r[1]+o[1]*r[0]],n[0]+=e[a];var o,r;return n}const Ot=(e,t,n,o)=>e.createScriptProcessor(t,n,o),_t=()=>new DOMException("","NotSupportedError"),bt={numberOfChannels:1},At={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},xt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},It={disableNormalization:!1},Nt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Tt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Dt=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),Et=e=>{if(null===e)return!1;const t=e.length;return t%2!=0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},kt=(e,t,n,o)=>{let r=e;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:a,set:i}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,{get:n(a),set:o(i)})},Pt=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(o){if(9!==o.code)throw o;Pt(e,t,n+1e-7)}},Ft=(Rt=be,(e,t,[n,o,r],a)=>{Rt(e[o],[t,n,r],(e=>e[0]===t&&e[1]===n),a)});var Rt;const Wt=(e=>(t,n,[o,r,a],i)=>{const s=t.get(o);void 0===s?t.set(o,new Set([[r,n,a]])):e(s,[r,n,a],(e=>e[0]===r&&e[1]===n),i)})(be),St=(Lt=oe,(e,t,n,o)=>Lt(e[o],(e=>e[0]===t&&e[1]===n)));var Lt;const Vt=new WeakMap,qt=(jt=Vt,e=>{var t;return null!==(t=jt.get(e))&&void 0!==t?t:0});var jt;const Xt=(Yt=new Map,Zt=new WeakMap,(e,t)=>{const n=Zt.get(e);if(void 0!==n)return n;const o=Yt.get(e);if(void 0!==o)return o;try{const n=t();return n instanceof Promise?(Yt.set(e,n),n.catch((()=>!1)).then((t=>(Yt.delete(e),Zt.set(e,t),t)))):(Zt.set(e,n),n)}catch{return Zt.set(e,!1),!1}});var Yt,Zt;const zt="undefined"==typeof window?null:window,Bt=(Gt=Xt,Qt=de,(e,t)=>{const n=e.createAnalyser();if(ut(n,t),!(t.maxDecibels>t.minDecibels))throw Qt();return lt(n,t,"fftSize"),lt(n,t,"maxDecibels"),lt(n,t,"minDecibels"),lt(n,t,"smoothingTimeConstant"),Gt(ht,(()=>ht(n)))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const o=Math.max(n.length,e.fftSize);for(let e=0;e<o;e+=1)t[e]=.0078125*(n[e]-128);return t}})(n),n});var Gt,Qt;const Ut=($t=Ce,e=>{const t=$t(e);if(null===t.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer});var $t;const Ht=((e,t,n)=>async(o,r,a)=>{const i=e(o);await Promise.all(i.activeInputs.map(((e,i)=>Array.from(e).map((async([e,s])=>{const c=t(e),l=await c.render(e,r),u=o.context.destination;n(e)||o===u&&n(o)||l.connect(a,s,i)})))).reduce(((e,t)=>[...e,...t]),[]))})(Ce,Ut,Fe),Jt=(Kt=Bt,en=ke,tn=Ht,()=>{const e=new WeakMap;return{render(t,n){const o=e.get(n);return void 0!==o?Promise.resolve(o):(async(t,n)=>{let o=en(t);if(!ue(o,n)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=Kt(n,e)}return e.set(n,o),await tn(t,n,o),o})(t,n)}}});var Kt,en,tn;const nn=(on=B,e=>{const t=on.get(e);if(void 0===t)throw ot();return t});var on;const rn=null===(an=zt)?null:an.hasOwnProperty("OfflineAudioContext")?an.OfflineAudioContext:an.hasOwnProperty("webkitOfflineAudioContext")?an.webkitOfflineAudioContext:null;var an;const sn=(cn=rn,e=>null!==cn&&e instanceof cn);var cn;const ln=new WeakMap,un=r(o),hn=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(zt),dn=(pn=hn,e=>null!==pn&&e instanceof pn);var pn;const fn=(e=>t=>null!==e&&"function"==typeof e.AudioNode&&t instanceof e.AudioNode)(zt),mn=(e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam)(zt),vn=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(zt),gn=((e,t,n,o,r,a,i,s,c,l,u,h,d,p,f,m)=>class extends l{constructor(t,o,r,a){super(r),this._context=t,this._nativeAudioNode=r;const i=u(t);h(i)&&!0!==n(We,(()=>We(i,m)))&&(e=>{const t=new Map;var n,o;e.connect=(n=e.connect.bind(e),(e,o=0,r=0)=>{const a=Le(e)?n(e,o,r):n(e,o),i=t.get(e);return void 0===i?t.set(e,[{input:r,output:o}]):i.every((e=>e.input!==r||e.output!==o))&&i.push({input:r,output:o}),a}),e.disconnect=(o=e.disconnect,(n,r,a)=>{if(o.apply(e),void 0===n)t.clear();else if("number"==typeof n)for(const[e,o]of t){const r=o.filter((e=>e.output!==n));0===r.length?t.delete(e):t.set(e,r)}else if(t.has(n))if(void 0===r)t.delete(n);else{const e=t.get(n);if(void 0!==e){const o=e.filter((e=>e.output!==r&&(e.input!==a||void 0===a)));0===o.length?t.delete(n):t.set(n,o)}}for(const[o,i]of t)i.forEach((t=>{Le(o)?e.connect(o,t.output,t.input):e.connect(o,t.output)}))})})(r),Y.set(this,r),G.set(this,new Set),"closed"!==t.state&&o&&ae(this),e(this,a,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,n=0,s=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();const l=u(this._context),h=f(l);if(d(e)||p(e))throw a();if(Oe(e)){const r=ke(e);try{const t=Ne(this._nativeAudioNode,r,n,s),o=Re(this);(h||o)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!o&&Re(e)&&ae(e)}catch(v){if(12===v.code)throw a();throw v}if(t(this,e,n,s,h)){const t=c([this],e);Se(t,o(h))}return e}const m=Pe(e);if("playbackRate"===m.name&&1024===m.maxValue)throw i();try{this._nativeAudioNode.connect(m,n),(h||Re(this))&&this._nativeAudioNode.disconnect(m,n)}catch(v){if(12===v.code)throw a();throw v}if(Ve(this,e,n,h)){const t=c([this],e);Se(t,o(h))}}disconnect(e,t,n){let o;const i=u(this._context),l=f(i);if(void 0===e)o=((e,t)=>{const n=Ce(e),o=[];for(const r of n.outputs)_e(r)?qe(e,t,...r):je(e,t,...r),o.push(r[0]);return n.outputs.clear(),o})(this,l);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw r();o=((e,t,n)=>{const o=Ce(e),r=[];for(const a of o.outputs)a[1]===n&&(_e(a)?qe(e,t,...a):je(e,t,...a),r.push(a[0]),o.outputs.delete(a));return r})(this,l,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw r();if(Oe(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw r();if(o=((e,t,n,o,r)=>{const a=Ce(e);return Array.from(a.outputs).filter((e=>!(e[0]!==n||void 0!==o&&e[1]!==o||void 0!==r&&e[2]!==r))).map((n=>(_e(n)?qe(e,t,...n):je(e,t,...n),a.outputs.delete(n),n[0])))})(this,l,e,t,n),0===o.length)throw a()}for(const r of o){const e=c([this],r);Se(e,s)}}})((Cn=X,(e,t,n)=>{const o=[];for(let r=0;r<n.numberOfInputs;r+=1)o.push(new Set);Cn.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,o,r,a,i,s,c,l,u,h,d)=>{const p=new WeakMap;return(f,m,v,g,C)=>{const{activeInputs:w,passiveInputs:y}=a(m),{outputs:M}=a(f),O=s(f),_=a=>{const s=c(m),l=c(f);if(a){const t=re(y,f,v,g);e(w,f,t,!1),C||h(f)||n(l,s,v,g),d(m)&&ae(m)}else{const e=o(w,f,v,g);t(y,g,e,!1),C||h(f)||r(l,s,v,g);const n=i(m);if(0===n)u(m)&&ce(m,w);else{const e=p.get(m);void 0!==e&&clearTimeout(e),p.set(m,setTimeout((()=>{u(m)&&ce(m,w)}),1e3*n))}}};return!!l(M,[m,v,g],(e=>e[0]===m&&e[1]===v&&e[2]===g),!0)&&(O.add(_),u(f)?e(w,f,[v,g,_],!0):t(y,g,[f,v,_],!0),!0)}})(Ft,Wt,Ne,St,Ee,Ce,qt,e,ke,be,ge,Fe,Re),Xt,((e,t,n,o,r,a)=>i=>(s,c)=>{const l=e.get(s);if(void 0===l){if(!i&&a(s)){const e=o(s),{outputs:a}=n(s);for(const n of a)if(_e(n)){const r=o(n[0]);t(e,r,n[1],n[2])}else{const t=r(n[0]);e.disconnect(t,n[1])}}e.set(s,c)}else e.set(s,l+c)})(Q,Ee,Ce,ke,Pe,ge),de,rt,_t,((e,t,n,o,r,a,i,s)=>(c,l)=>{const u=t.get(c);if(void 0===u)throw new Error("Missing the expected cycle count.");const h=a(c.context),d=s(h);if(u===l){if(t.delete(c),!d&&i(c)){const t=o(c),{outputs:a}=n(c);for(const n of a)if(_e(n)){const r=o(n[0]);e(t,r,n[1],n[2])}else{const e=r(n[0]);t.connect(e,n[1])}}}else t.set(c,u-l)})(Ne,Q,Ce,ke,Pe,nn,ge,sn),((e,t,n)=>function o(r,a){const i=Oe(a)?a:n(e,a);if((e=>"delayTime"in e)(i))return[];if(r[0]===i)return[r];if(r.includes(i))return[];const{outputs:s}=t(i);return Array.from(s).map((e=>o([...r,i],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(ln,Ce,ne),un,nn,dn,fn,mn,sn,vn);var Cn;const wn=((e,t,n,o,r,a)=>class extends e{constructor(e,n){const i=r(e),s={...le,...n},c=o(i,s);super(e,!1,c,a(i)?t():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(gn,Jt,de,Bt,nn,sn),yn=new WeakSet,Mn=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(zt),On=(_n=new Uint32Array(1),e=>(_n[0]=e,_n[0]));var _n;const bn=((e,t)=>n=>{n.copyFromChannel=(o,r,a=0)=>{const i=e(a),s=e(r);if(s>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(s),u=o.length;for(let e=i<0?-i:0;e+i<c&&e<u;e+=1)o[e]=l[e+i]},n.copyToChannel=(o,r,a=0)=>{const i=e(a),s=e(r);if(s>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(s),u=o.length;for(let e=i<0?-i:0;e+i<c&&e<u;e+=1)l[e+i]=o[e]}})(On,de),An=(xn=On,e=>{var t,n;e.copyFromChannel=(t=e.copyFromChannel,(n,o,r=0)=>{const a=xn(r),i=xn(o);if(a<e.length)return t.call(e,n,i,a)}),e.copyToChannel=(n=e.copyToChannel,(t,o,r=0)=>{const a=xn(r),i=xn(o);if(a<e.length)return n.call(e,t,i,a)})});var xn;const In=((e,t,n,o,r,a,i,s)=>{let c=null;return class l{constructor(l){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:h,sampleRate:d}={...fe,...l};null===c&&(c=new r(1,1,44100));const p=null!==o&&t(a,a)?new o({length:u,numberOfChannels:h,sampleRate:d}):c.createBuffer(h,u,d);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(i(p),pe(p)):t(he,(()=>he(p)))||s(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===l.prototype||e.has(t)}}})(yn,Xt,_t,Mn,rn,(Nn=Mn,()=>{if(null===Nn)return!1;try{new Nn({length:1,sampleRate:44100})}catch{return!1}return!0}),bn,An);var Nn;const Tn=(Dn=wt,(e,t)=>{const n=Dn(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(n).connect(e.destination);const o=()=>{t.removeEventListener("ended",o),t.disconnect(n),n.disconnect()};t.addEventListener("ended",o)});var Dn;const En=(kn=Ut,Pn=we,Fn=Fe,async(e,t,n)=>{const o=Pn(e);await Promise.all(Array.from(o.activeInputs).map((async([e,o])=>{const r=kn(e),a=await r.render(e,t);Fn(e)||a.connect(n,o)})))});var kn,Pn,Fn;const Rn=(Wn=En,(e,t,n)=>Wn(t,e,n));var Wn;const Sn=M(Tn,Xt,F,P,k,E,D,T,N,I(kt),x),Ln=((e,t)=>(n,o,r)=>(e(o).replay(r),t(o,n,r)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(we),En),Vn=S(Rn,Sn,ke,Ln,Ht),qn=((e,t,o,r,a,i,s,c,l,u,h,d,p)=>(f,m,v,g=null,C=null)=>{const w=v.value,y=new n(w),M=m?r(y):null,O={get defaultValue(){return w},get maxValue(){return null===g?v.maxValue:g},get minValue(){return null===C?v.minValue:C},get value(){return v.value},set value(e){v.value=e,O.setValueAtTime(e,f.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof v.cancelAndHoldAtTime)null===M&&y.flush(f.context.currentTime),y.add(a(e)),v.cancelAndHoldAtTime(e);else{const t=Array.from(y).pop();null===M&&y.flush(f.context.currentTime),y.add(a(e));const n=Array.from(y).pop();v.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?v.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?v.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?v.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&v.setValueCurveAtTime(n.values,n.startTime,n.duration))}return O},cancelScheduledValues:e=>(null===M&&y.flush(f.context.currentTime),y.add(i(e)),v.cancelScheduledValues(e),O),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=f.context.currentTime;return null===M&&y.flush(n),0===Array.from(y).length&&(y.add(u(w,n)),v.setValueAtTime(w,n)),y.add(s(e,t)),v.exponentialRampToValueAtTime(e,t),O},linearRampToValueAtTime(e,t){const n=f.context.currentTime;return null===M&&y.flush(n),0===Array.from(y).length&&(y.add(u(w,n)),v.setValueAtTime(w,n)),y.add(c(e,t)),v.linearRampToValueAtTime(e,t),O},setTargetAtTime:(e,t,n)=>(null===M&&y.flush(f.context.currentTime),y.add(l(e,t,n)),v.setTargetAtTime(e,t,n),O),setValueAtTime:(e,t)=>(null===M&&y.flush(f.context.currentTime),y.add(u(e,t)),v.setValueAtTime(e,t),O),setValueCurveAtTime(e,t,n){const o=e instanceof Float32Array?e:new Float32Array(e);if(null!==d&&"webkitAudioContext"===d.name){const e=t+n,r=f.context.sampleRate,a=Math.ceil(t*r),i=Math.floor(e*r),s=i-a,c=new Float32Array(s);for(let u=0;u<s;u+=1){const e=(o.length-1)/n*((a+u)/r-t),i=Math.floor(e),s=Math.ceil(e);c[u]=i===s?o[i]:(1-(e-i))*o[i]+(1-(s-e))*o[s]}null===M&&y.flush(f.context.currentTime),y.add(h(c,t,n)),v.setValueCurveAtTime(c,t,n);const l=i/r;l<e&&p(O,c[c.length-1],l),p(O,o[o.length-1],e)}else null===M&&y.flush(f.context.currentTime),y.add(h(o,t,n)),v.setValueCurveAtTime(o,t,n);return O}};return o.set(O,v),t.set(O,f),e(O,M),O})((jn=Z,(e,t)=>{jn.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),ln,z,(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:o}=n;t.exponentialRampToValueAtTime(o,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:o}=n;t.linearRampToValueAtTime(o,e)}else if("setTarget"===n.type){const{startTime:e,target:o,timeConstant:r}=n;t.setTargetAtTime(o,e,r)}else if("setValue"===n.type){const{startTime:e,value:o}=n;t.setValueAtTime(o,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:o,values:r}=n;t.setValueCurveAtTime(r,o,e)}}}})),h,u,l,c,s,i,a,hn,Pt);var jn;const Xn=O(gn,Vn,qn,ot,Sn,nn,sn,o),Yn=((e,t,n,o,r,a,i,s)=>class extends e{constructor(e,n){const o=a(e),c=i(o),l=r(o,n,c);super(e,!1,l,c?t(s):null),this._isNodeOfNativeOfflineAudioContext=c,this._nativeAudioDestinationNode=l}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(gn,(e=>{const t=new WeakMap;return{render(n,o){const r=t.get(o);return void 0!==r?Promise.resolve(r):(async(n,o)=>{const r=o.destination;return t.set(o,r),await e(n,o,r),r})(n,o)}}}),de,ot,((e,t)=>(n,o,r)=>{const a=n.destination;if(a.channelCount!==o)try{a.channelCount=o}catch{}r&&"explicit"!==a.channelCountMode&&(a.channelCountMode="explicit"),0===a.maxChannelCount&&Object.defineProperty(a,"maxChannelCount",{value:o});const i=e(n,{channelCount:o,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return t(i,"channelCount",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t);try{a.channelCount=t}catch(n){if(t>a.maxChannelCount)throw n}})),t(i,"channelCountMode",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t),a.channelCountMode=t})),t(i,"channelInterpretation",(e=>()=>e.call(i)),(e=>t=>{e.call(i,t),a.channelInterpretation=t})),Object.defineProperty(i,"maxChannelCount",{get:()=>a.maxChannelCount}),i.connect(a),i})(wt,kt),nn,sn,Ht),Zn=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=ue(c,s);if(!l){const e={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=t(s,e)}return a.set(s,c),l?(await e(s,i.Q,c.Q),await e(s,i.detune,c.detune),await e(s,i.frequency,c.frequency),await e(s,i.gain,c.gain)):(await o(s,i.Q,c.Q),await o(s,i.detune,c.detune),await o(s,i.frequency,c.frequency),await o(s,i.gain,c.gain)),await r(i,s,c),c})(i,s)}}})(Rn,mt,ke,Ln,Ht),zn=(e=>(t,n)=>e.set(t,n))(Vt),Bn=(Gn=gn,Qn=qn,Un=Zn,$n=rt,Hn=mt,Jn=nn,Kn=sn,eo=zn,class extends Gn{constructor(e,t){const n=Jn(e),o={...Qe,...t},r=Hn(n,o),a=Kn(n);super(e,!1,r,a?Un():null),this._Q=Qn(this,a,r.Q,ve,me),this._detune=Qn(this,a,r.detune,1200*Math.log2(ve),-1200*Math.log2(ve)),this._frequency=Qn(this,a,r.frequency,e.sampleRate/2,0),this._gain=Qn(this,a,r.gain,40*Math.log10(ve),me),this._nativeBiquadFilterNode=r,eo(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(o){if(11===o.code)throw $n();throw o}if(e.length!==t.length||t.length!==n.length)throw $n()}});var Gn,Qn,Un,$n,Hn,Jn,Kn,eo;const to=((e,t)=>(n,o,r)=>{const a=new Set;var i,s;return n.connect=(i=n.connect,(r,s=0,c=0)=>{const l=0===a.size;if(t(r))return i.call(n,r,s,c),e(a,[r,s,c],(e=>e[0]===r&&e[1]===s&&e[2]===c),!0),l&&o(),r;i.call(n,r,s),e(a,[r,s],(e=>e[0]===r&&e[1]===s),!0),l&&o()}),n.disconnect=(s=n.disconnect,(e,o,i)=>{const c=a.size>0;if(void 0===e)s.apply(n),a.clear();else if("number"==typeof e){s.call(n,e);for(const t of a)t[1]===e&&a.delete(t)}else{t(e)?s.call(n,e,o,i):s.call(n,e,o);for(const t of a)t[0]!==e||void 0!==o&&t[1]!==o||void 0!==i&&t[2]!==i||a.delete(t)}const l=0===a.size;c&&l&&r()}),n})(be,fn);var no,oo;const ro=((e,t)=>(n,o)=>{const r=n.createChannelMerger(o.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,r),ut(r,o),r})(hn,(no=ot,oo=to,(e,t)=>{t.channelCount=1,t.channelCountMode="explicit",Object.defineProperty(t,"channelCount",{get:()=>1,set:()=>{throw no()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:()=>{throw no()}});const n=e.createBufferSource();oo(t,(()=>{const e=t.numberOfInputs;for(let o=0;o<e;o+=1)n.connect(t,0,o)}),(()=>n.disconnect(t)))})),ao=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!ue(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs};i=e(a,t)}return o.set(a,i),await n(r,a,i),i})(r,a)}}})(ro,ke,Ht),io=((e,t,n,o,r)=>class extends e{constructor(e,a){const i=o(e),s={...Ue,...a};super(e,!1,n(i,s),r(i)?t():null)}})(gn,ao,ro,nn,sn),so=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!ue(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs};i=e(a,t)}return o.set(a,i),await n(r,a,i),i})(r,a)}}})(vt,ke,Ht),co=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=o(e),c=a({...$e,...i});super(e,!1,n(s,c),r(s)?t():null)}})(gn,so,vt,nn,sn,(e=>({...e,channelCount:e.numberOfOutputs}))),lo=_(Tn,Xt,L(Tn,Sn,wt,to),E,T),uo=b(gn,qn,V(Rn,lo,ke,Ln,Ht),lo,nn,sn,o),ho=(po=_t,fo=kt,(e,t)=>{const n=e.createConvolver();if(ut(n,t),t.disableNormalization===n.normalize&&(n.normalize=!t.disableNormalization),lt(n,t,"buffer"),t.channelCount>2)throw po();if(fo(n,"channelCount",(e=>()=>e.call(n)),(e=>t=>{if(t>2)throw po();return e.call(n,t)})),"max"===t.channelCountMode)throw po();return fo(n,"channelCountMode",(e=>()=>e.call(n)),(e=>t=>{if("max"===t)throw po();return e.call(n,t)})),n});var po,fo;const mo=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!ue(i,a)){const t={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize};i=e(a,t)}return o.set(a,i),Ie(i)?await n(r,a,i.inputs[0]):await n(r,a,i),i})(r,a)}}})(ho,ke,Ht),vo=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=o(e),c={...He,...i},l=n(s,c);super(e,!1,l,r(s)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=l,null!==c.buffer&&a(this,c.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(gn,mo,ho,nn,sn,zn),go=((e,t,n,o,r)=>a=>{const i=new WeakMap;return{render(s,c){const l=i.get(c);return void 0!==l?Promise.resolve(l):(async(s,c)=>{let l=n(s);const u=ue(l,c);if(!u){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:a};l=t(c,e)}return i.set(c,l),u?await e(c,s.delayTime,l.delayTime):await o(c,s.delayTime,l.delayTime),await r(s,c,l),l})(s,c)}}})(Rn,Ct,ke,Ln,Ht),Co=((e,t,n,o,r,a,i)=>class extends e{constructor(e,s){const c=r(e),l={...Ke,...s},u=o(c,l),h=a(c);super(e,!1,u,h?n(l.maxDelayTime):null),this._delayTime=t(this,h,u.delayTime),i(this,l.maxDelayTime)}get delayTime(){return this._delayTime}})(gn,qn,go,Ct,nn,sn,zn),wo=(e=>(t,n)=>{const o=t.createDynamicsCompressor();if(ut(o,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return dt(o,n,"attack"),dt(o,n,"knee"),dt(o,n,"ratio"),dt(o,n,"release"),dt(o,n,"threshold"),o})(_t),yo=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=ue(c,s);if(!l){const e={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=t(s,e)}return a.set(s,c),l?(await e(s,i.attack,c.attack),await e(s,i.knee,c.knee),await e(s,i.ratio,c.ratio),await e(s,i.release,c.release),await e(s,i.threshold,c.threshold)):(await o(s,i.attack,c.attack),await o(s,i.knee,c.knee),await o(s,i.ratio,c.ratio),await o(s,i.release,c.release),await o(s,i.threshold,c.threshold)),await r(i,s,c),c})(i,s)}}})(Rn,wo,ke,Ln,Ht),Mo=((e,t,n,o,r,a,i,s)=>class extends e{constructor(e,r){const c=a(e),l={...tt,...r},u=o(c,l),h=i(c);super(e,!1,u,h?n():null),this._attack=t(this,h,u.attack),this._knee=t(this,h,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,h,u.ratio),this._release=t(this,h,u.release),this._threshold=t(this,h,u.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(gn,qn,yo,wo,_t,nn,sn,zn),Oo=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=ue(c,s);if(!l){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=t(s,e)}return a.set(s,c),l?await e(s,i.gain,c.gain):await o(s,i.gain,c.gain),await r(i,s,c),c})(i,s)}}})(Rn,wt,ke,Ln,Ht),_o=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=r(e),c={...nt,...i},l=o(s,c),u=a(s);super(e,!1,l,u?n():null),this._gain=t(this,u,l.gain,ve,me)}get gain(){return this._gain}})(gn,qn,Oo,wt,nn,sn),bo=((e,t,n,o)=>(r,a,{channelCount:i,channelCountMode:s,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=pt(a,r.sampleRate),d=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),f=d.length,m=p.length,v=Math.min(f,m);if(0===f||f>20)throw o();if(0===d[0])throw t();if(0===m||m>20)throw o();if(0===p[0])throw t();if(1!==d[0]){for(let e=0;e<m;e+=1)p[e]/=d[0];for(let e=1;e<f;e+=1)d[e]/=d[0]}const g=n(r,h,i,i);g.channelCount=i,g.channelCountMode=s,g.channelInterpretation=c;const C=[],w=[],y=[];for(let e=0;e<i;e+=1){C.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),w.push(e),y.push(t)}g.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,o=t.numberOfChannels;for(let r=0;r<o;r+=1){const e=t.getChannelData(r),o=n.getChannelData(r);C[r]=it(d,f,p,m,v,w[r],y[r],C[r],32,e,o)}};const M=r.sampleRate/2;return gt({get bufferSize(){return h},get channelCount(){return g.channelCount},set channelCount(e){g.channelCount=e},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){g.channelCountMode=e},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(e){g.channelInterpretation=e},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...e)=>g.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>g.dispatchEvent(e[0]),getFrequencyResponse(t,n,o){if(t.length!==n.length||n.length!==o.length)throw e();const r=t.length;for(let e=0;e<r;e+=1){const r=-Math.PI*(t[e]/M),a=[Math.cos(r),Math.sin(r)],i=yt(Mt(p,a),Mt(d,a));n[e]=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o[e]=Math.atan2(i[1],i[0])}},removeEventListener:(...e)=>g.removeEventListener(e[0],e[1],e[2])},g)})(rt,ot,Ot,_t),Ao=((e,t,n,o)=>r=>e(ct,(()=>ct(r)))?Promise.resolve(e(o,o)).then((e=>{if(!e){const e=n(r,512,0,1);r.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>r.currentTime,e.connect(r.destination)}return r.startRendering()})):new Promise((e=>{const n=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(r.destination),r.startRendering()})))(Xt,wt,Ot,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),o=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{n.oncomplete=()=>{o.disconnect(),e(0!==n.currentTime)},n.startRendering()}))})(wt,rn)),xo=((e,t,n,o,r)=>(a,i)=>{const s=new WeakMap;let c=null;const l=async(l,u)=>{let h=null,d=t(l);const p=ue(d,u);if(void 0===u.createIIRFilter?h=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=u.createIIRFilter(i,a)),s.set(u,null===h?d:h),null!==h){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(l.context.destination.channelCount,l.context.length,u.sampleRate);c=(async()=>{await o(l,e,e.destination);return((e,t,n,o)=>{const r=n instanceof Float64Array?n:new Float64Array(n),a=o instanceof Float64Array?o:new Float64Array(o),i=r.length,s=a.length,c=Math.min(i,s);if(1!==r[0]){for(let e=0;e<i;e+=1)a[e]/=r[0];for(let e=1;e<s;e+=1)r[e]/=r[0]}const l=new Float32Array(32),u=new Float32Array(32),h=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let p=0;p<d;p+=1){const t=e.getChannelData(p),n=h.getChannelData(p);l.fill(0),u.fill(0),it(r,i,a,s,c,l,u,0,32,t,n)}return h})(await r(e),u,a,i)})()}const e=await c;return h.buffer=e,h.start(0),h}return await o(l,u,d),d};return{render(e,t){const n=s.get(t);return void 0!==n?Promise.resolve(n):l(e,t)}}})(Sn,ke,rn,Ht,Ao);var Io;const No=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=o(e),c=r(s),l={...at,...i},u=t(s,c?null:e.baseLatency,l);super(e,!1,u,c?n(l.feedback,l.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,o,r)=>{if(n.length!==o.length||o.length!==r.length)throw rt();return t.call(e,n,o,r)})})(u),this._nativeIIRFilterNode=u,a(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(gn,(Io=bo,(e,t,n)=>{if(void 0===e.createIIRFilter)return Io(e,t,n);const o=e.createIIRFilter(n.feedforward,n.feedback);return ut(o,n),o}),xo,nn,sn,zn),To=((e,t,n,o,r,a,i,s)=>(c,l)=>{const u=l.listener,{forwardX:h,forwardY:d,forwardZ:p,positionX:f,positionY:m,positionZ:v,upX:g,upY:C,upZ:w}=void 0===u.forwardX?(()=>{const h=new Float32Array(1),d=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=i(l);let f=!1,m=[0,0,-1,0,1,0],v=[0,0,0];const g=()=>{if(f)return;f=!0;const e=o(l,256,9,0);e.onaudioprocess=({inputBuffer:e})=>{const t=[a(e,h,0),a(e,h,1),a(e,h,2),a(e,h,3),a(e,h,4),a(e,h,5)];t.some(((e,t)=>e!==m[t]))&&(u.setOrientation(...t),m=t);const n=[a(e,h,6),a(e,h,7),a(e,h,8)];n.some(((e,t)=>e!==v[t]))&&(u.setPosition(...n),v=n)},d.connect(e)},C=e=>t=>{t!==m[e]&&(m[e]=t,u.setOrientation(...m))},w=e=>t=>{t!==v[e]&&(v[e]=t,u.setPosition(...v))},y=(t,o,a)=>{const i=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:o});i.connect(d,0,t),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>o});const u=e({context:c},p,i.offset,ve,me);var h,f,m,v,C,w,y;return s(u,"value",(e=>()=>e.call(u)),(e=>t=>{try{e.call(u,t)}catch(n){if(9!==n.code)throw n}g(),p&&a(t)})),u.cancelAndHoldAtTime=(h=u.cancelAndHoldAtTime,p?()=>{throw r()}:(...e)=>{const t=h.apply(u,e);return g(),t}),u.cancelScheduledValues=(f=u.cancelScheduledValues,p?()=>{throw r()}:(...e)=>{const t=f.apply(u,e);return g(),t}),u.exponentialRampToValueAtTime=(m=u.exponentialRampToValueAtTime,p?()=>{throw r()}:(...e)=>{const t=m.apply(u,e);return g(),t}),u.linearRampToValueAtTime=(v=u.linearRampToValueAtTime,p?()=>{throw r()}:(...e)=>{const t=v.apply(u,e);return g(),t}),u.setTargetAtTime=(C=u.setTargetAtTime,p?()=>{throw r()}:(...e)=>{const t=C.apply(u,e);return g(),t}),u.setValueAtTime=(w=u.setValueAtTime,p?()=>{throw r()}:(...e)=>{const t=w.apply(u,e);return g(),t}),u.setValueCurveAtTime=(y=u.setValueCurveAtTime,p?()=>{throw r()}:(...e)=>{const t=y.apply(u,e);return g(),t}),u};return{forwardX:y(0,0,C(0)),forwardY:y(1,0,C(1)),forwardZ:y(2,-1,C(2)),positionX:y(6,0,w(0)),positionY:y(7,0,w(1)),positionZ:y(8,0,w(2)),upX:y(3,0,C(3)),upY:y(4,1,C(4)),upZ:y(5,0,C(5))}})():u;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return p},get positionX(){return f},get positionY(){return m},get positionZ(){return v},get upX(){return g},get upY(){return C},get upZ(){return w}}})(qn,ro,lo,Ot,_t,Dt,sn,kt),Do=new WeakMap,Eo=((e,t,n,o,r,a)=>class extends n{constructor(n,a){super(n),this._nativeContext=n,B.set(this,n),o(n)&&r.set(n,new Set),this._destination=new e(this,a),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"==typeof e?a(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Yn,To,un,sn,Do,o),ko=((e,t,n,o,r,a)=>(i,s)=>{const c=i.createOscillator();return ut(c,s),dt(c,s,"detune"),dt(c,s,"frequency"),void 0!==s.periodicWave?c.setPeriodicWave(s.periodicWave):lt(c,s,"type"),t(n,(()=>n(i)))||f(c),t(o,(()=>o(i)))||a(c,i),t(r,(()=>r(i)))||m(c),e(i,c),c})(Tn,Xt,E,D,T,x),Po=((e,t,n,o,r)=>()=>{const a=new WeakMap;let i=null,s=null,c=null;return{set periodicWave(e){i=e},set start(e){s=e},set stop(e){c=e},render(l,u){const h=a.get(u);return void 0!==h?Promise.resolve(h):(async(l,u)=>{let h=n(l);const d=ue(h,u);if(!d){const e={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===i?void 0:i,type:h.type};h=t(u,e),null!==s&&h.start(s),null!==c&&h.stop(c)}return a.set(u,h),d?(await e(u,l.detune,h.detune),await e(u,l.frequency,h.frequency)):(await o(u,l.detune,h.detune),await o(u,l.frequency,h.frequency)),await r(l,u,h),h})(l,u)}}})(Rn,ko,ke,Ln,Ht),Fo=((e,t,n,o,r,a,i)=>class extends e{constructor(e,i){const s=r(e),c={...At,...i},l=n(s,c),u=a(s),h=u?o():null,d=e.sampleRate/2;super(e,!1,l,h),this._detune=t(this,u,l.detune,153600,-153600),this._frequency=t(this,u,l.frequency,d,-d),this._nativeOscillatorNode=l,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?i(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(e=0){if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){ae(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),ge(this)&&se(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(gn,qn,ko,Po,nn,sn,o),Ro=q(Sn),Wo=((e,t,n,o,r)=>(a,{curve:i,oversample:s,...c})=>{const l=a.createWaveShaper(),u=a.createWaveShaper();ut(l,c),ut(u,c);const h=n(a,{...c,gain:1}),d=n(a,{...c,gain:-1}),p=n(a,{...c,gain:1}),f=n(a,{...c,gain:-1});let m=null,v=!1,g=null;const C={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(e){h.channelCount=e,d.channelCount=e,l.channelCount=e,p.channelCount=e,u.channelCount=e,f.channelCount=e},get channelCountMode(){return l.channelCountMode},set channelCountMode(e){h.channelCountMode=e,d.channelCountMode=e,l.channelCountMode=e,p.channelCountMode=e,u.channelCountMode=e,f.channelCountMode=e},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e,d.channelInterpretation=e,l.channelInterpretation=e,p.channelInterpretation=e,u.channelInterpretation=e,f.channelInterpretation=e},get context(){return l.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)l.curve=n,u.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),o=new Float32Array(e+2-e%2);t[0]=n[0],o[0]=-n[e-1];const r=Math.ceil((e+1)/2),a=(e+1)/2-1;for(let i=1;i<r;i+=1){const s=i/r*a,c=Math.floor(s),l=Math.ceil(s);t[i]=c===l?n[c]:(1-(s-c))*n[c]+(1-(l-s))*n[l],o[i]=c===l?-n[e-1-c]:-(1-(s-c))*n[e-1-c]-(1-(l-s))*n[e-1-l]}t[r]=e%2==1?n[r-1]:(n[r-2]+n[r-1])/2,l.curve=t,u.curve=o}g=n,v&&(o(g)&&null===m?m=e(a,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(e){l.oversample=e,u.oversample=e},addEventListener:(...e)=>h.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>h.dispatchEvent(e[0]),removeEventListener:(...e)=>h.removeEventListener(e[0],e[1],e[2])};null!==i&&(C.curve=i instanceof Float32Array?i:new Float32Array(i)),s!==C.oversample&&(C.oversample=s);return r(gt(C,p),(()=>{h.connect(l).connect(p),h.connect(d).connect(u).connect(f).connect(p),v=!0,o(g)&&(m=e(a,h))}),(()=>{h.disconnect(l),l.disconnect(p),h.disconnect(d),d.disconnect(u),u.disconnect(f),f.disconnect(p),v=!1,null!==m&&(m(),m=null)}))})(Ro,ot,wt,Et,to),So=((e,t,n,o,r,a,i)=>(s,c)=>{const l=s.createWaveShaper();if(null!==a&&"webkitAudioContext"===a.name&&void 0===s.createGain().gain.automationRate)return n(s,c);ut(l,c);const u=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==u&&u.length<2)throw t();lt(l,{curve:u},"curve"),lt(l,c,"oversample");let h=null,d=!1;i(l,"curve",(e=>()=>e.call(l)),(t=>n=>(t.call(l,n),d&&(o(n)&&null===h?h=e(s,l):o(n)||null===h||(h(),h=null)),n)));return r(l,(()=>{d=!0,o(l.curve)&&(h=e(s,l))}),(()=>{d=!1,null!==h&&(h(),h=null)}))})(Ro,ot,Wo,Et,to,hn,kt),Lo=((e,t,n,o,r,a,i,s,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:p,distanceModel:f,maxDistance:m,orientationX:v,orientationY:g,orientationZ:C,panningModel:w,positionX:y,positionY:M,positionZ:O,refDistance:_,rolloffFactor:b,...A})=>{const x=u.createPanner();if(A.channelCount>2)throw i();if("max"===A.channelCountMode)throw i();ut(x,A);const I={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},N=n(u,{...I,channelInterpretation:"speakers",numberOfInputs:6}),T=o(u,{...A,gain:1}),D=o(u,{...I,gain:1}),E=o(u,{...I,gain:0}),k=o(u,{...I,gain:0}),P=o(u,{...I,gain:0}),F=o(u,{...I,gain:0}),R=o(u,{...I,gain:0}),W=r(u,256,6,1),S=a(u,{...I,curve:new Float32Array([1,1]),oversample:"none"});let L=[v,g,C],V=[y,M,O];const q=new Float32Array(1);W.onaudioprocess=({inputBuffer:e})=>{const t=[c(e,q,0),c(e,q,1),c(e,q,2)];t.some(((e,t)=>e!==L[t]))&&(x.setOrientation(...t),L=t);const n=[c(e,q,3),c(e,q,4),c(e,q,5)];n.some(((e,t)=>e!==V[t]))&&(x.setPosition(...n),V=n)},Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0});const j={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(e){if(e>2)throw i();T.channelCount=e,x.channelCount=e},get channelCountMode(){return x.channelCountMode},set channelCountMode(e){if("max"===e)throw i();T.channelCountMode=e,x.channelCountMode=e},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(e){T.channelInterpretation=e,x.channelInterpretation=e},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(e){x.coneInnerAngle=e},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(e){x.coneOuterAngle=e},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();x.coneOuterGain=e},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(e){x.distanceModel=e},get inputs(){return[T]},get maxDistance(){return x.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;x.maxDistance=e},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return D.gain},get orientationY(){return E.gain},get orientationZ(){return k.gain},get panningModel(){return x.panningModel},set panningModel(e){x.panningModel=e},get positionX(){return P.gain},get positionY(){return F.gain},get positionZ(){return R.gain},get refDistance(){return x.refDistance},set refDistance(e){if(e<0)throw new RangeError;x.refDistance=e},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;x.rolloffFactor=e},addEventListener:(...e)=>T.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>T.dispatchEvent(e[0]),removeEventListener:(...e)=>T.removeEventListener(e[0],e[1],e[2])};h!==j.coneInnerAngle&&(j.coneInnerAngle=h),d!==j.coneOuterAngle&&(j.coneOuterAngle=d),p!==j.coneOuterGain&&(j.coneOuterGain=p),f!==j.distanceModel&&(j.distanceModel=f),m!==j.maxDistance&&(j.maxDistance=m),v!==j.orientationX.value&&(j.orientationX.value=v),g!==j.orientationY.value&&(j.orientationY.value=g),C!==j.orientationZ.value&&(j.orientationZ.value=C),w!==j.panningModel&&(j.panningModel=w),y!==j.positionX.value&&(j.positionX.value=y),M!==j.positionY.value&&(j.positionY.value=M),O!==j.positionZ.value&&(j.positionZ.value=O),_!==j.refDistance&&(j.refDistance=_),b!==j.rolloffFactor&&(j.rolloffFactor=b),1===L[0]&&0===L[1]&&0===L[2]||x.setOrientation(...L),0===V[0]&&0===V[1]&&0===V[2]||x.setPosition(...V);return l(gt(j,x),(()=>{T.connect(x),e(T,S,0,0),S.connect(D).connect(N,0,0),S.connect(E).connect(N,0,1),S.connect(k).connect(N,0,2),S.connect(P).connect(N,0,3),S.connect(F).connect(N,0,4),S.connect(R).connect(N,0,5),N.connect(W).connect(u.destination)}),(()=>{T.disconnect(x),s(T,S,0,0),S.disconnect(D),D.disconnect(N),S.disconnect(E),E.disconnect(N),S.disconnect(k),k.disconnect(N),S.disconnect(P),P.disconnect(N),S.disconnect(F),F.disconnect(N),S.disconnect(R),R.disconnect(N),N.disconnect(W),W.disconnect(u.destination)}))})(Ne,ot,ro,wt,Ot,So,_t,Ee,Dt,to),Vo=(qo=Lo,(e,t)=>{const n=e.createPanner();return void 0===n.orientationX?qo(e,t):(ut(n,t),dt(n,t,"orientationX"),dt(n,t,"orientationY"),dt(n,t,"orientationZ"),dt(n,t,"positionX"),dt(n,t,"positionY"),dt(n,t,"positionZ"),lt(n,t,"coneInnerAngle"),lt(n,t,"coneOuterAngle"),lt(n,t,"coneOuterGain"),lt(n,t,"distanceModel"),lt(n,t,"maxDistance"),lt(n,t,"panningModel"),lt(n,t,"refDistance"),lt(n,t,"rolloffFactor"),n)});var qo;const jo=((e,t,n,o,r,a,i,s,c,l)=>()=>{const u=new WeakMap;let h=null;return{render(d,p){const f=u.get(p);return void 0!==f?Promise.resolve(f):(async(d,p)=>{let f=null,m=a(d);const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},g={...v,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},C=ue(m,p);if("bufferSize"in m)f=o(p,{...v,gain:1});else if(!C){const e={...g,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=r(p,e)}if(u.set(p,null===f?m:f),null!==f){if(null===h){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new i(6,d.context.length,p.sampleRate),o=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});o.connect(e.destination),h=(async()=>{const t=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map((async(t,o)=>{const r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===o?1:0});return await s(e,t,r.offset),r})));for(let e=0;e<6;e+=1)t[e].connect(o,0,e),t[e].start(0);return l(e)})()}const e=await h,a=o(p,{...v,gain:1});await c(d,p,a);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let m=[u[0][0],u[1][0],u[2][0]],C=[u[3][0],u[4][0],u[5][0]],w=o(p,{...v,gain:1}),y=r(p,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:C[0],positionY:C[1],positionZ:C[2]});a.connect(w).connect(y.inputs[0]),y.connect(f);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some(((e,t)=>e!==m[t]))||n.some(((e,t)=>e!==C[t]))){m=e,C=n;const i=t/p.sampleRate;w.gain.setValueAtTime(0,i),w=o(p,{...v,gain:0}),y=r(p,{...g,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),w.gain.setValueAtTime(1,i),a.connect(w).connect(y.inputs[0]),y.connect(f)}}return f}return C?(await e(p,d.orientationX,m.orientationX),await e(p,d.orientationY,m.orientationY),await e(p,d.orientationZ,m.orientationZ),await e(p,d.positionX,m.positionX),await e(p,d.positionY,m.positionY),await e(p,d.positionZ,m.positionZ)):(await s(p,d.orientationX,m.orientationX),await s(p,d.orientationY,m.orientationY),await s(p,d.orientationZ,m.orientationZ),await s(p,d.positionX,m.positionX),await s(p,d.positionY,m.positionY),await s(p,d.positionZ,m.positionZ)),Ie(m)?await c(d,p,m.inputs[0]):await c(d,p,m),m})(d,p)}}})(Rn,ro,lo,wt,Vo,ke,rn,Ln,Ht,Ao),Xo=((e,t,n,o,r,a,i)=>class extends e{constructor(e,s){const c=r(e),l={...xt,...s},u=n(c,l),h=a(c);super(e,!1,u,h?o():null),this._nativePannerNode=u,this._orientationX=t(this,h,u.orientationX,ve,me),this._orientationY=t(this,h,u.orientationY,ve,me),this._orientationZ=t(this,h,u.orientationZ,ve,me),this._positionX=t(this,h,u.positionX,ve,me),this._positionY=t(this,h,u.positionY,ve,me),this._positionZ=t(this,h,u.positionZ,ve,me),i(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(gn,qn,Vo,jo,nn,sn,zn),Yo=(e=>(t,{disableNormalization:n,imag:o,real:r})=>{const a=o instanceof Float32Array?o:new Float32Array(o),i=r instanceof Float32Array?r:new Float32Array(r),s=t.createPeriodicWave(i,a,{disableNormalization:n});if(Array.from(o).length<2)throw e();return s})(de),Zo=((e,t,n,o)=>class r{constructor(r,a){const i=t(r),s=o({...It,...a}),c=e(i,s);return n.add(c),c}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===r.prototype||n.has(e)}})(Yo,nn,new WeakSet,(e=>{const{imag:t,real:n}=e;return void 0===t?void 0===n?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...e,imag:t,real:Array.from(t,(()=>0))}:{...e,imag:t,real:n}})),zo=((e,t,n,o,r,a)=>{const i=16385,s=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(e,a,h,d,p)=>{if(1===a)return((e,t,r,a)=>{const h=new Float32Array(i),d=new Float32Array(i);for(let n=0;n<i;n+=1){const e=n/16384*c;h[n]=Math.cos(e),d[n]=Math.sin(e)}const p=n(e,{...l,gain:0}),f=o(e,{...u,curve:h}),m=o(e,{...u,curve:s}),v=n(e,{...l,gain:0}),g=o(e,{...u,curve:d});return{connectGraph(){t.connect(p),t.connect(void 0===m.inputs?m:m.inputs[0]),t.connect(v),m.connect(r),r.connect(void 0===f.inputs?f:f.inputs[0]),r.connect(void 0===g.inputs?g:g.inputs[0]),f.connect(p.gain),g.connect(v.gain),p.connect(a,0,0),v.connect(a,0,1)},disconnectGraph(){t.disconnect(p),t.disconnect(void 0===m.inputs?m:m.inputs[0]),t.disconnect(v),m.disconnect(r),r.disconnect(void 0===f.inputs?f:f.inputs[0]),r.disconnect(void 0===g.inputs?g:g.inputs[0]),f.disconnect(p.gain),g.disconnect(v.gain),p.disconnect(a,0,0),v.disconnect(a,0,1)}}})(e,h,d,p);if(2===a)return((e,r,a,h)=>{const d=new Float32Array(i),p=new Float32Array(i),f=new Float32Array(i),m=new Float32Array(i),v=Math.floor(8192.5);for(let t=0;t<i;t+=1)if(t>v){const e=(t-v)/(16384-v)*c;d[t]=Math.cos(e),p[t]=Math.sin(e),f[t]=0,m[t]=1}else{const e=t/(16384-v)*c;d[t]=1,p[t]=0,f[t]=Math.cos(e),m[t]=Math.sin(e)}const g=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=n(e,{...l,gain:0}),w=o(e,{...u,curve:d}),y=n(e,{...l,gain:0}),M=o(e,{...u,curve:p}),O=o(e,{...u,curve:s}),_=n(e,{...l,gain:0}),b=o(e,{...u,curve:f}),A=n(e,{...l,gain:0}),x=o(e,{...u,curve:m});return{connectGraph(){r.connect(g),r.connect(void 0===O.inputs?O:O.inputs[0]),g.connect(C,0),g.connect(y,0),g.connect(_,1),g.connect(A,1),O.connect(a),a.connect(void 0===w.inputs?w:w.inputs[0]),a.connect(void 0===M.inputs?M:M.inputs[0]),a.connect(void 0===b.inputs?b:b.inputs[0]),a.connect(void 0===x.inputs?x:x.inputs[0]),w.connect(C.gain),M.connect(y.gain),b.connect(_.gain),x.connect(A.gain),C.connect(h,0,0),_.connect(h,0,0),y.connect(h,0,1),A.connect(h,0,1)},disconnectGraph(){r.disconnect(g),r.disconnect(void 0===O.inputs?O:O.inputs[0]),g.disconnect(C,0),g.disconnect(y,0),g.disconnect(_,1),g.disconnect(A,1),O.disconnect(a),a.disconnect(void 0===w.inputs?w:w.inputs[0]),a.disconnect(void 0===M.inputs?M:M.inputs[0]),a.disconnect(void 0===b.inputs?b:b.inputs[0]),a.disconnect(void 0===x.inputs?x:x.inputs[0]),w.disconnect(C.gain),M.disconnect(y.gain),b.disconnect(_.gain),x.disconnect(A.gain),C.disconnect(h,0,0),_.disconnect(h,0,0),y.disconnect(h,0,1),A.disconnect(h,0,1)}}})(e,h,d,p);throw r()};return(t,{channelCount:o,channelCountMode:i,pan:s,...c})=>{if("max"===i)throw r();const l=e(t,{...c,channelCount:1,channelCountMode:i,numberOfInputs:2}),u=n(t,{...c,channelCount:o,channelCountMode:i,gain:1}),d=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:p,disconnectGraph:f}=h(t,o,u,d,l);Object.defineProperty(d.gain,"defaultValue",{get:()=>0}),Object.defineProperty(d.gain,"maxValue",{get:()=>1}),Object.defineProperty(d.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount!==e&&(v&&f(),({connectGraph:p,disconnectGraph:f}=h(t,e,u,d,l)),v&&p()),u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw r();u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get pan(){return d.gain},addEventListener:(...e)=>u.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>u.dispatchEvent(e[0]),removeEventListener:(...e)=>u.removeEventListener(e[0],e[1],e[2])};let v=!1;return a(gt(m,l),(()=>{p(),v=!0}),(()=>{f(),v=!1}))}})(ro,vt,wt,So,_t,to),Bo=((e,t)=>(n,o)=>{const r=o.channelCountMode;if("clamped-max"===r)throw t();if(void 0===n.createStereoPanner)return e(n,o);const a=n.createStereoPanner();return ut(a,o),dt(a,o,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>r,set:e=>{if(e!==r)throw t()}}),a})(zo,_t),Go=((e,t,n,o,r)=>()=>{const a=new WeakMap;return{render(i,s){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s)=>{let c=n(i);const l=ue(c,s);if(!l){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=t(s,e)}return a.set(s,c),l?await e(s,i.pan,c.pan):await o(s,i.pan,c.pan),Ie(c)?await r(i,s,c.inputs[0]):await r(i,s,c),c})(i,s)}}})(Rn,Bo,ke,Ln,Ht),Qo=((e,t,n,o,r,a)=>class extends e{constructor(e,i){const s=r(e),c={...Nt,...i},l=n(s,c),u=a(s);super(e,!1,l,u?o():null),this._pan=t(this,u,l.pan)}get pan(){return this._pan}})(gn,qn,Bo,Go,nn,sn),Uo=((e,t,n)=>()=>{const o=new WeakMap;return{render(r,a){const i=o.get(a);return void 0!==i?Promise.resolve(i):(async(r,a)=>{let i=t(r);if(!ue(i,a)){const t={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample};i=e(a,t)}return o.set(a,i),Ie(i)?await n(r,a,i.inputs[0]):await n(r,a,i),i})(r,a)}}})(So,ke,Ht),$o=((e,t,n,o,r,a,i)=>class extends e{constructor(e,t){const s=r(e),c={...Tt,...t},l=n(s,c);super(e,!0,l,a(s)?o():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,i(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(gn,ot,So,Uo,nn,sn,zn),Ho=(e=>null!==e&&e.isSecureContext)(zt),Jo=(e=>(t,n,o)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return o()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(zt),Ko=new WeakMap,er=((e,t)=>n=>{let o=e.get(n);if(void 0!==o)return o;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return o=new t(1,1,44100),e.set(n,o),o})(Ko,rn),tr=Ho?((e,t,n,o,r,a,i,s,c,l,u,h,d)=>{let p=0;return(f,m,v={credentials:"omit"})=>{const g=u.get(f);if(void 0!==g&&g.has(m))return Promise.resolve();const C=l.get(f);if(void 0!==C){const e=C.get(m);if(void 0!==e)return e}const w=a(f),y=void 0===w.audioWorklet?r(m).then((([e,t])=>{const[o,r]=K(e,t);return n(`${o};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}\n})})(window,'_AWGS')`)})).then((()=>{const e=d._AWGS.pop();if(void 0===e)throw new SyntaxError;o(w.currentTime,w.sampleRate,(()=>e(class{},void 0,((e,n)=>{if(""===e.trim())throw t();const o=U.get(w);if(void 0!==o){if(o.has(e))throw t();te(n),ee(n.parameterDescriptors),o.set(e,n)}else te(n),ee(n.parameterDescriptors),U.set(w,new Map([[e,n]]))}),w.sampleRate,void 0,void 0)))})):Promise.all([r(m),Promise.resolve(e(h,h))]).then((([[e,t],n])=>{const o=p+1;p=o;const[r,a]=K(e,t),l=new Blob([`${r};((AudioWorkletProcessor,registerProcessor)=>{${a}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${o}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(l);return w.audioWorklet.addModule(u,v).then((()=>{if(s(w))return w;const e=i(w);return e.audioWorklet.addModule(u,v).then((()=>e))})).then((e=>{if(null===c)throw new SyntaxError;try{new c(e,`__sac${o}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(u)))}));return void 0===C?l.set(f,new Map([[m,y]])):C.set(m,y),y.then((()=>{const e=u.get(f);void 0===e?u.set(f,new Set([m])):e.add(m)})).finally((()=>{const e=l.get(f);void 0!==e&&e.delete(m)})),y}})(Xt,_t,W(zt),Jo,R((()=>new DOMException("","AbortError"))),nn,er,sn,vn,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),o=new t(1,128,44100),r=URL.createObjectURL(n);let a=!1,i=!1;try{await o.audioWorklet.addModule(r);const t=new e(o,"a",{numberOfOutputs:0}),n=o.createOscillator();t.port.onmessage=()=>a=!0,t.onprocessorerror=()=>i=!0,n.connect(t),n.start(0),await o.startRendering(),await new Promise((e=>setTimeout(e)))}catch{}finally{URL.revokeObjectURL(r)}return a&&!i})(vn,rn),zt):void 0,nr=((e,t)=>n=>e(n)||t(n))(dn,sn),or=((e,t,n,o,r,a,i,s,c,l,u)=>(h,d)=>{const p=i(h)?h:a(h);if(r.has(d)){const e=n();return Promise.reject(e)}try{r.add(d)}catch{}return t(c,(()=>c(p)))?p.decodeAudioData(d).then((n=>(Je(d).catch((()=>{})),t(s,(()=>s(n)))||u(n),e.add(n),n))):new Promise(((t,n)=>{const r=async()=>{try{await Je(d)}catch{}},a=e=>{n(e),r()};try{p.decodeAudioData(d,(n=>{"function"!=typeof n.copyFromChannel&&(l(n),pe(n)),e.add(n),r().then((()=>t(n)))}),(e=>{a(null===e?o():e)}))}catch(i){a(i)}}))})(yn,Xt,(()=>new DOMException("","DataCloneError")),(()=>new DOMException("","EncodingError")),new WeakSet,nn,nr,he,ct,bn,An),rr=(ar=tr,ir=wn,sr=In,cr=Xn,lr=Bn,ur=io,hr=co,dr=uo,pr=vo,fr=or,mr=Co,vr=Mo,gr=_o,Cr=No,wr=Eo,yr=Fo,Mr=Xo,Or=Zo,_r=Qo,br=$o,class extends wr{constructor(e,t){super(e,t),this._nativeContext=e,this._audioWorklet=void 0===ar?void 0:{addModule:(e,t)=>ar(this,e,t)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new ir(this)}createBiquadFilter(){return new lr(this)}createBuffer(e,t,n){return new sr({length:t,numberOfChannels:e,sampleRate:n})}createBufferSource(){return new cr(this)}createChannelMerger(e=6){return new ur(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new hr(this,{numberOfOutputs:e})}createConstantSource(){return new dr(this)}createConvolver(){return new pr(this)}createDelay(e=1){return new mr(this,{maxDelayTime:e})}createDynamicsCompressor(){return new vr(this)}createGain(){return new gr(this)}createIIRFilter(e,t){return new Cr(this,{feedback:t,feedforward:e})}createOscillator(){return new yr(this)}createPanner(){return new Mr(this)}createPeriodicWave(e,t,n={disableNormalization:!1}){return new Or(this,{...n,imag:t,real:e})}createStereoPanner(){return new _r(this)}createWaveShaper(){return new br(this)}decodeAudioData(e,t,n){return fr(this._nativeContext,e).then((e=>("function"==typeof t&&t(e),e)),(e=>{throw"function"==typeof n&&n(e),e}))}});var ar,ir,sr,cr,lr,ur,hr,dr,pr,fr,mr,vr,gr,Cr,wr,yr,Mr,Or,_r,br;const Ar=v(gn,w,nn,sn),xr=((e,t,n,o)=>class extends e{constructor(e,r){const a=n(e);if(o(a))throw new TypeError;const i={...st,...r},s=t(a,i);super(e,!1,s,null),this._nativeMediaStreamAudioDestinationNode=s}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(gn,((e,t)=>{const n=e.createMediaStreamDestination();return ut(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n}),nn,sn),Ir=g(gn,y,nn,sn),Nr=C(gn,A(ot,sn),nn),Tr=((e,t,n,o,r,a,i,s,c)=>class extends e{constructor(e={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let t;try{t=new c(e)}catch(i){if(12===i.code&&"sampleRate is not in range"===i.message)throw n();throw i}if(null===t)throw o();if(!(e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e))(e.latencyHint))throw new TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&t.sampleRate!==e.sampleRate)throw n();super(t,2);const{latencyHint:r}=e,{sampleRate:a}=t;if(this._baseLatency="number"==typeof t.baseLatency?t.baseLatency:"balanced"===r?512/a:"interactive"===r||void 0===r?256/a:"playback"===r?1024/a:128*Math.max(2,Math.min(128,Math.round(r*a/128)))/a,this._nativeAudioContext=t,"webkitAudioContext"===c.name?(this._nativeGainNode=t.createGain(),this._nativeOscillatorNode=t.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(t.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===t.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),t.removeEventListener("statechange",e)};t.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw t()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Me(this)})))}createMediaElementSource(e){return new r(this,{mediaElement:e})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(e){return new i(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new s(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise(((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((e=>{if(void 0===e||15===e.code)throw t();throw e}))}suspend(){return this._nativeAudioContext.suspend().catch((e=>{if(void 0===e)throw t();throw e}))}})(rr,ot,_t,(()=>new DOMException("","UnknownError")),Ar,xr,Ir,Nr,hn),Dr=(Er=Do,e=>{const t=Er.get(e);if(void 0===t)throw new Error("The context has no set of AudioWorkletNodes.");return t});var Er;const kr=(Pr=Dr,(e,t)=>{Pr(e).add(t)});var Pr;const Fr=(e=>(t,n,o=0,r=0)=>{const a=t[o];if(void 0===a)throw e();return Le(n)?a.connect(n,0,r):a.connect(n,0)})(de),Rr=(e=>(t,n)=>{e(t).delete(n)})(Dr),Wr=(e=>(t,n=void 0,o=void 0,r=0)=>void 0===n?t.forEach((e=>e.disconnect())):"number"==typeof n?et(e,t,n).disconnect():Le(n)?void 0===o?t.forEach((e=>e.disconnect(n))):void 0===r?et(e,t,o).disconnect(n,0):et(e,t,o).disconnect(n,0,r):void 0===o?t.forEach((e=>e.disconnect(n))):et(e,t,o).disconnect(n,0))(de),Sr=new WeakMap,Lr=(Vr=Sr,qr=ne,e=>qr(Vr,e));var Vr,qr;const jr=((e,t,n,o,r,a,i,s,c,l,u,h,d)=>(p,f,m,v)=>{if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw c();const g=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(g.some((e=>e<1)))throw c();if(g.length!==v.numberOfOutputs)throw t();if("explicit"!==v.channelCountMode)throw c();const C=v.channelCount*v.numberOfInputs,w=g.reduce(((e,t)=>e+t),0),y=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(C+y>6||w>6)throw c();const M=new MessageChannel,O=[],_=[];for(let e=0;e<v.numberOfInputs;e+=1)O.push(i(p,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),_.push(r(p,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const b=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:o}of m.parameterDescriptors){const r=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[o]?v.parameterData[o]:void 0===e?0:e});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?ve:t},minValue:{get:()=>void 0===n?me:n}}),b.push(r)}const A=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,C+y)}),x=pt(f,p.sampleRate),I=s(p,x,C+y,Math.max(1,w)),N=r(p,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),T=[];for(let e=0;e<v.numberOfOutputs;e+=1)T.push(o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[e]}));for(let e=0;e<v.numberOfInputs;e+=1){O[e].connect(_[e]);for(let t=0;t<v.channelCount;t+=1)_[e].connect(A,t,e*v.channelCount+t)}const D=new Xe(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map((({name:e},t)=>{const n=b[t];return n.connect(A,0,C+t),n.start(0),[e,n.offset]})));A.connect(I);let E=v.channelInterpretation,k=null;const P=0===v.numberOfOutputs?[I]:T,F={get bufferSize(){return x},get channelCount(){return v.channelCount},set channelCount(e){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return E},set channelInterpretation(e){for(const t of O)t.channelInterpretation=e;E=e},get context(){return I.context},get inputs(){return O},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return k},set onprocessorerror(e){"function"==typeof k&&F.removeEventListener("processorerror",k),k="function"==typeof e?e:null,"function"==typeof k&&F.addEventListener("processorerror",k)},get parameters(){return D},get port(){return M.port2},addEventListener:(...e)=>I.addEventListener(e[0],e[1],e[2]),connect:e.bind(null,P),disconnect:l.bind(null,P),dispatchEvent:(...e)=>I.dispatchEvent(e[0]),removeEventListener:(...e)=>I.removeEventListener(e[0],e[1],e[2])},R=new Map;var W,S;M.port1.addEventListener=(W=M.port1.addEventListener,(...e)=>{if("message"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=R.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{u(p.currentTime,p.sampleRate,(()=>t(e)))},R.set(t,e[1]))}}return W.call(M.port1,e[0],e[1],e[2])}),M.port1.removeEventListener=(S=M.port1.removeEventListener,(...e)=>{if("message"===e[0]){const t=R.get(e[1]);void 0!==t&&(R.delete(e[1]),e[1]=t)}return S.call(M.port1,e[0],e[1],e[2])});let L=null;Object.defineProperty(M.port1,"onmessage",{get:()=>L,set:e=>{"function"==typeof L&&M.port1.removeEventListener("message",L),L="function"==typeof e?e:null,"function"==typeof L&&(M.port1.addEventListener("message",L),M.port1.start())}}),m.prototype.port=M.port1;let V=null;const q=((e,t,n,o)=>{let r=$.get(e);void 0===r&&(r=new WeakMap,$.set(e,r));const a=ft(n,o);return r.set(t,a),a})(p,F,m,v);q.then((e=>V=e));const j=Be(v.numberOfInputs,v.channelCount),X=Be(v.numberOfOutputs,g),Y=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce(((e,{name:t})=>({...e,[t]:new Float32Array(128)})),{});let Z=!0;const z=()=>{v.numberOfOutputs>0&&I.disconnect(N);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=T[e];for(let o=0;o<g[e];o+=1)N.disconnect(n,t+o,o);t+=g[e]}},B=new Map;I.onaudioprocess=({inputBuffer:e,outputBuffer:t})=>{if(null!==V){const o=h(F);for(let r=0;r<x;r+=128){for(let t=0;t<v.numberOfInputs;t+=1)for(let n=0;n<v.channelCount;n+=1)Ze(e,j[t],n,n,r);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach((({name:t},n)=>{Ze(e,Y,t,C+n,r)}));for(let e=0;e<v.numberOfInputs;e+=1)for(let t=0;t<g[e];t+=1)0===X[e][t].byteLength&&(X[e][t]=new Float32Array(128));try{const e=j.map(((e,t)=>{if(o[t].size>0)return B.set(t,x/128),e;const n=B.get(t);return void 0===n?[]:(e.every((e=>e.every((e=>0===e))))&&(1===n?B.delete(t):B.set(t,n-1)),e)})),n=u(p.currentTime+r/p.sampleRate,p.sampleRate,(()=>V.process(e,X,Y)));Z=n;for(let o=0,a=0;o<v.numberOfOutputs;o+=1){for(let e=0;e<g[o];e+=1)ze(t,X[o],e,a+e,r);a+=g[o]}}catch(n){Z=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:n.colno,filename:n.filename,lineno:n.lineno,message:n.message}))}if(!Z){for(let e=0;e<v.numberOfInputs;e+=1){O[e].disconnect(_[e]);for(let t=0;t<v.channelCount;t+=1)_[r].disconnect(A,t,e*v.channelCount+t)}if(void 0!==m.parameterDescriptors){const e=m.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=b[t];e.disconnect(A,0,C+t),e.stop()}}A.disconnect(I),I.onaudioprocess=null,G?z():H();break}}}};let G=!1;const Q=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),U=()=>I.connect(Q).connect(p.destination),H=()=>{I.disconnect(Q),Q.disconnect()};return U(),d(F,(()=>{if(Z){H(),v.numberOfOutputs>0&&I.connect(N);for(let e=0,t=0;e<v.numberOfOutputs;e+=1){const n=T[e];for(let o=0;o<g[e];o+=1)N.connect(n,t+o,o);t+=g[e]}}G=!0}),(()=>{Z&&(U(),z()),G=!1}))})(Fr,de,ot,ro,vt,lo,wt,Ot,_t,Wr,Jo,Lr,to),Xr=((e,t,n,o,r)=>(a,i,s,c,l,u)=>{if(null!==s)try{const t=new s(a,c,u),o=new Map;let i=null;if(Object.defineProperties(t,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>i,set:e=>{"function"==typeof i&&t.removeEventListener("processorerror",i),i="function"==typeof e?e:null,"function"==typeof i&&t.addEventListener("processorerror",i)}}}),t.addEventListener=(d=t.addEventListener,(...e)=>{if("processorerror"===e[0]){const t="function"==typeof e[1]?e[1]:"object"==typeof e[1]&&null!==e[1]&&"function"==typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=o.get(e[1]);void 0!==n?e[1]=n:(e[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),t(n)):t(new ErrorEvent(e[0],{...n}))},o.set(t,e[1]))}}return d.call(t,"error",e[1],e[2]),d.call(t,...e)}),t.removeEventListener=(h=t.removeEventListener,(...e)=>{if("processorerror"===e[0]){const t=o.get(e[1]);void 0!==t&&(o.delete(e[1]),e[1]=t)}return h.call(t,"error",e[1],e[2]),h.call(t,e[0],e[1],e[2])}),0!==u.numberOfOutputs){const e=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(e).connect(a.destination);return r(t,(()=>e.disconnect()),(()=>e.connect(a.destination)))}return t}catch(p){if(11===p.code)throw o();throw p}var h,d;if(void 0===l)throw o();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(u),t(a,i,l,u)})(ot,jr,wt,_t,to),Yr=((e,t,n,o,r,a,i,s,c,l,u,h,d,p,f,m)=>(v,g,C)=>{const w=new WeakMap;let y=null;return{render(M,O){s(O,M);const _=w.get(O);return void 0!==_?Promise.resolve(_):(async(s,M)=>{let O=u(s),_=null;const b=ue(O,M),A=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===h){const e=A.reduce(((e,t)=>e+t),0),n=r(M,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),a=[];for(let t=0;t<s.numberOfOutputs;t+=1)a.push(o(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[t]}));const l=i(M,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});l.connect=t.bind(null,a),l.disconnect=c.bind(null,a),_=[n,a,l]}else b||(O=new h(M,v));if(w.set(M,null===_?O:_[2]),null!==_){if(null===y){if(void 0===C)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const e=s.channelCount*s.numberOfInputs,t=void 0===C.parameterDescriptors?0:C.parameterDescriptors.length,n=e+t,c=async()=>{const c=new d(n,128*Math.ceil(s.context.length/128),M.sampleRate),l=[],u=[];for(let e=0;e<g.numberOfInputs;e+=1)l.push(i(c,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),u.push(r(c,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const h=await Promise.all(Array.from(s.parameters.values()).map((async e=>{const t=a(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await p(c,e,t.offset),t}))),v=o(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<g.numberOfInputs;e+=1){l[e].connect(u[e]);for(let t=0;t<g.channelCount;t+=1)u[e].connect(v,t,e*g.channelCount+t)}for(const[t,n]of h.entries())n.connect(v,0,e+t),n.start(0);return v.connect(c.destination),await Promise.all(l.map((e=>f(s,c,e)))),m(c)};y=Ge(s,0===n?null:await c(),M,g,A,C,l)}const e=await y,t=n(M,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[c,u,h]=_;null!==e&&(t.buffer=e,t.start(0)),t.connect(c);for(let n=0,o=0;n<s.numberOfOutputs;n+=1){const e=u[n];for(let t=0;t<A[n];t+=1)c.connect(e,o+t,t);o+=A[n]}return h}if(b)for(const[t,n]of s.parameters.entries())await e(M,n,O.parameters.get(t));else for(const[e,t]of s.parameters.entries())await p(M,t,O.parameters.get(e));return await f(s,M,O),O})(M,O)}}})(Rn,Fr,Sn,ro,vt,lo,wt,Rr,Wr,Jo,ke,vn,rn,Ln,Ht,Ao),Zr=(zr=Ko,e=>zr.get(e));var zr;const Br=(e=>(t,n)=>{e.set(t,n)})(Sr),Gr=Ho?((e,t,n,o,r,a,i,s,c,l,u,h,d,p)=>class extends t{constructor(t,p,f){var m;const v=s(t),g=c(v),C=u({...Ye,...f});d(C);const w=U.get(v),y=null==w?void 0:w.get(p),M=g||"closed"!==v.state?v:null!==(m=i(v))&&void 0!==m?m:v,O=r(M,g?null:t.baseLatency,l,p,y,C);super(t,!0,O,g?o(p,C,y):null);const _=[];O.parameters.forEach(((e,t)=>{const o=n(this,g,e);_.push([t,o])})),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new Xe(_),g&&e(v,this);const{activeInputs:b}=a(this);h(O,b)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"==typeof e?p(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(kr,gn,qn,Yr,Xr,Ce,Zr,nn,sn,vn,(e=>({...e,outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},(()=>1))})),Br,(e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}}),o):void 0,Qr=((e,t)=>(n,o,r)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,o,r)}catch(a){if("SyntaxError"===a.name)throw e();throw a}})(_t,rn),Ur=((e,t,n,o,r,a,i,s)=>(c,l)=>n(c).render(c,l).then((()=>Promise.all(Array.from(o(l)).map((e=>n(e).render(e,l)))))).then((()=>r(l))).then((n=>("function"!=typeof n.copyFromChannel?(i(n),pe(n)):t(a,(()=>a(n)))||s(n),e.add(n),n))))(yn,Xt,Ut,Dr,Ao,he,bn,An),$r=((e,t,n,o,r)=>class extends e{constructor(e,n,r){let a;if("number"==typeof e&&void 0!==n&&void 0!==r)a={length:n,numberOfChannels:e,sampleRate:r};else{if("object"!=typeof e)throw new Error("The given parameters are not valid.");a=e}const{length:i,numberOfChannels:s,sampleRate:c}={...bt,...a},l=o(s,i,c);t(ct,(()=>ct(l)))||l.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(l.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(l,s),this._length=i,this._nativeOfflineAudioContext=l,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,Me(this)})))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout((()=>this._waitForThePromiseToSettle(e)))}})(rr,Xt,ot,Qr,Ur),Hr=((e,t)=>n=>{const o=e.get(n);return t(o)||t(n)})(B,dn),Jr=(Kr=Y,ea=fn,e=>Kr.has(e)||ea(e));var Kr,ea;const ta=(na=z,oa=mn,e=>na.has(e)||oa(e));var na,oa;const ra=((e,t)=>n=>{const o=e.get(n);return t(o)||t(n)})(B,sn);export{G as E,ve as M,Tr as a,Gr as b,Hr as c,ta as d,Jr as e,In as f,ne as g,me as h,ra as i,ge as j,se as k,ue as l,ot as m,ut as n,$r as o,dt as p,lt as q,gt as r,ae as s};
