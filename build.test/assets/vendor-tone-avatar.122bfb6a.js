import{j as e,k as t,_ as r}from"./vendor-tone-esm.8edb30e2.js";import{_ as n}from"./vendor-tone-type.9e20d569.js";import{c as o}from"./vendor-tone-classnames.ea5eadd4.js";import{R as a}from"./vendor-tone-es.9387ac1c.js";import{Q as s,aR as c,L as i}from"./vendor-tone-util.a79eb63f.js";import{r as l,e as f}from"./vendor-react-core.73efc664.js";import"./vendor-tone-config-provider.2fc53c46.js";import{G as m}from"./vendor-tone-hooks.ee856eec.js";import{C as u}from"./vendor-tone-context.2287e470.js";import{P as p}from"./vendor-tone-popover.9c9808a5.js";var v=l.createContext("default"),d=function(e){var t=e.children,r=e.size;return l.createElement(v.Consumer,null,(function(e){return l.createElement(v.Provider,{value:r||e},t)}))},g=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},y=function(i,f){var p=l.useContext(v),d=l.useState(1),y=e(d,2),h=y[0],x=y[1],E=l.useState(!1),b=e(E,2),j=b[0],C=b[1],O=l.useState(!0),S=e(O,2),P=S[0],z=S[1],N=l.useRef(null),k=l.useRef(null),w=s(f,N),R=l.useContext(u).getPrefixCls,T=function(){if(k.current&&N.current){var e=k.current.offsetWidth,t=N.current.offsetWidth;if(0!==e&&0!==t){var r=i.gap,n=void 0===r?4:r;2*n<t&&x(t-2*n<e?(t-2*n)/e:1)}}};l.useEffect((function(){C(!0)}),[]),l.useEffect((function(){z(!0),x(1)}),[i.src]),l.useEffect((function(){T()}),[i.gap]);var _,G=i.prefixCls,H=i.shape,W=void 0===H?"circle":H,A=i.size,F=void 0===A?"default":A,I=i.src,L=i.srcSet,M=i.icon,Q=i.className,U=i.alt,V=i.draggable,X=i.children,q=i.crossOrigin,B=g(i,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),D="default"===F?p:F,J=Object.keys("object"===n(D)&&D||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),K=m(J),Y=l.useMemo((function(){if("object"!==n(D))return{};var e=c.find((function(e){return K[e]})),t=D[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:M?t/2:18}:{}}),[K,D]),Z=R("avatar",G),$=o(t(t({},"".concat(Z,"-lg"),"large"===D),"".concat(Z,"-sm"),"small"===D)),ee=l.isValidElement(I),te=o(Z,$,t(t(t({},"".concat(Z,"-").concat(W),!!W),"".concat(Z,"-image"),ee||I&&P),"".concat(Z,"-icon"),!!M),Q),re="number"==typeof D?{width:D,height:D,lineHeight:"".concat(D,"px"),fontSize:M?D/2:18}:{};if("string"==typeof I&&P)_=l.createElement("img",{src:I,draggable:V,srcSet:L,onError:function(){var e=i.onError;!1!==(e?e():void 0)&&z(!1)},alt:U,crossOrigin:q});else if(ee)_=I;else if(M)_=M;else if(j||1!==h){var ne="scale(".concat(h,") translateX(-50%)"),oe={msTransform:ne,WebkitTransform:ne,transform:ne},ae="number"==typeof D?{lineHeight:"".concat(D,"px")}:{};_=l.createElement(a,{onResize:T},l.createElement("span",{className:"".concat(Z,"-string"),ref:k,style:r(r({},ae),oe)},X))}else _=l.createElement("span",{className:"".concat(Z,"-string"),style:{opacity:0},ref:k},X);return delete B.onError,delete B.gap,l.createElement("span",r({},B,{style:r(r(r({},re),Y),B.style),className:te,ref:w}),_)};const h=l.forwardRef(y);const x=function(e){var r=l.useContext(u),n=r.getPrefixCls,a=r.direction,s=e.prefixCls,c=e.className,m=void 0===c?"":c,v=e.maxCount,g=e.maxStyle,y=e.size,x=n("avatar-group",s),E=o(x,t({},"".concat(x,"-rtl"),"rtl"===a),m),b=e.children,j=e.maxPopoverPlacement,C=void 0===j?"top":j,O=e.maxPopoverTrigger,S=void 0===O?"hover":O,P=i(b).map((function(e,t){return f(e,{key:"avatar-key-".concat(t)})})),z=P.length;if(v&&v<z){var N=P.slice(0,v),k=P.slice(v,z);return N.push(l.createElement(p,{key:"avatar-popover-key",content:k,trigger:S,placement:C,overlayClassName:"".concat(x,"-popover")},l.createElement(h,{style:g},"+".concat(z-v)))),l.createElement(d,{size:y},l.createElement("div",{className:E,style:e.style},N))}return l.createElement(d,{size:y},l.createElement("div",{className:E,style:e.style},P))};var E=h;E.Group=x;const b=E;export{b as A};
