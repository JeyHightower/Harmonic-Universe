import{q as e,_ as n,j as t,i as o,k as a}from"./vendor-tone-esm.8edb30e2.js";import{r}from"./vendor-react-core.73efc664.js";import{c as i}from"./vendor-tone-classnames.ea5eadd4.js";import{p as l,e as s,f as c,C as u,I as p,F as m}from"./vendor-tone-es.9387ac1c.js";import{az as d,ao as f,aA as v,aB as C}from"./vendor-tone-util.a79eb63f.js";import{M as h,I as b,u as E,b as y,P as M,c as x,d as g,e as N}from"./vendor-tone-context.2287e470.js";import{w as k,x as I,y as P}from"./vendor-tone-hooks.ee856eec.js";var R=["className","children"],S=function(t,o){var a=t.className,l=t.children,s=e(t,R),c=r.useContext(h),u=c.prefixCls,p=c.mode,m=c.rtl;return r.createElement("ul",n({className:i(u,m&&"".concat(u,"-rtl"),"".concat(u,"-sub"),"".concat(u,"-").concat("inline"===p?"inline":"vertical"),a),role:"menu"},s,{"data-menu-list":!0,ref:o}),l)},L=r.forwardRef(S);L.displayName="SubMenuList";var T={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function K(e){var n=e.prefixCls,u=e.visible,p=e.children,m=e.popup,v=e.popupClassName,C=e.popupOffset,b=e.disabled,E=e.mode,y=e.onVisibleChange,M=r.useContext(h),x=M.getPopupContainer,g=M.rtl,N=M.subMenuOpenDelay,k=M.subMenuCloseDelay,I=M.builtinPlacements,P=M.triggerSubMenuAction,R=M.forceSubMenuRender,S=M.rootClassName,L=M.motion,K=M.defaultMotions,O=r.useState(!1),j=t(O,2),w=j[0],z=j[1],A=o(o({},g?l:s),I),V=T[E],D=d(E,L,K),F=r.useRef(D);"inline"!==E&&(F.current=D);var _=o(o({},F.current),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),q=r.useRef();return r.useEffect((function(){return q.current=f((function(){z(u)})),function(){f.cancel(q.current)}}),[u]),r.createElement(c,{prefixCls:n,popupClassName:i("".concat(n,"-popup"),a({},"".concat(n,"-rtl"),g),v,S),stretch:"horizontal"===E?"minWidth":null,getPopupContainer:x,builtinPlacements:A,popupPlacement:V,popupVisible:w,popup:m,popupAlign:C&&{offset:C},action:b?[]:[P],mouseEnterDelay:N,mouseLeaveDelay:k,onPopupVisibleChange:y,forceRender:R,popupMotion:_},p)}function O(e){var a=e.id,i=e.open,l=e.keyPath,s=e.children,c="inline",p=r.useContext(h),m=p.prefixCls,f=p.forceSubMenuRender,v=p.motion,C=p.defaultMotions,E=p.mode,y=r.useRef(!1);y.current=E===c;var M=r.useState(!y.current),x=t(M,2),g=x[0],N=x[1],k=!!y.current&&i;r.useEffect((function(){y.current&&N(!1)}),[E]);var I=o({},d(c,v,C));l.length>1&&(I.motionAppear=!1);var P=I.onVisibleChanged;return I.onVisibleChanged=function(e){return y.current||e||N(!0),null==P?void 0:P(e)},g?null:r.createElement(b,{mode:c,locked:!y.current},r.createElement(u,n({visible:k},I,{forceRender:f,removeOnLeave:!1,leavedClassName:"".concat(m,"-hidden")}),(function(e){var n=e.className,t=e.style;return r.createElement(L,{id:a,className:n,style:t},s)})))}var j=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],w=["active"],z=function(l){var s,c=l.style,u=l.className,d=l.title,f=l.eventKey;l.warnKey;var v=l.disabled,y=l.internalPopupClose,M=l.children,R=l.itemIcon,S=l.expandIcon,T=l.popupClassName,z=l.popupOffset,A=l.onClick,V=l.onMouseEnter,D=l.onMouseLeave,F=l.onTitleClick,_=l.onTitleMouseEnter,q=l.onTitleMouseLeave,B=e(l,j),U=x(f),W=r.useContext(h),G=W.prefixCls,H=W.mode,J=W.openKeys,Q=W.disabled,X=W.overflowDisabled,Y=W.activeKey,Z=W.selectedKeys,$=W.itemIcon,ee=W.expandIcon,ne=W.onItemClick,te=W.onOpenChange,oe=W.onActive,ae=r.useContext(g)._internalRenderSubMenuItem,re=r.useContext(N).isSubPathKey,ie=E(),le="".concat(G,"-submenu"),se=Q||v,ce=r.useRef(),ue=r.useRef(),pe=R||$,me=S||ee,de=J.includes(f),fe=!X&&de,ve=re(Z,f),Ce=k(f,se,_,q),he=Ce.active,be=e(Ce,w),Ee=r.useState(!1),ye=t(Ee,2),Me=ye[0],xe=ye[1],ge=function(e){se||xe(e)},Ne=r.useMemo((function(){return he||"inline"!==H&&(Me||re([Y],f))}),[H,he,Y,Me,f,re]),ke=I(ie.length),Ie=P((function(e){null==A||A(C(e)),ne(e)})),Pe=U&&"".concat(U,"-popup"),Re=r.createElement("div",n({role:"menuitem",style:ke,className:"".concat(le,"-title"),tabIndex:se?null:-1,ref:ce,title:"string"==typeof d?d:null,"data-menu-id":X&&U?null:U,"aria-expanded":fe,"aria-haspopup":!0,"aria-controls":Pe,"aria-disabled":se,onClick:function(e){se||(null==F||F({key:f,domEvent:e}),"inline"===H&&te(f,!de))},onFocus:function(){oe(f)}},be),d,r.createElement(p,{icon:"horizontal"!==H?me:null,props:o(o({},l),{},{isOpen:fe,isSubMenu:!0})},r.createElement("i",{className:"".concat(le,"-arrow")}))),Se=r.useRef(H);if("inline"!==H&&ie.length>1?Se.current="vertical":Se.current=H,!X){var Le=Se.current;Re=r.createElement(K,{mode:Le,prefixCls:le,visible:!y&&fe&&"inline"!==H,popupClassName:T,popupOffset:z,popup:r.createElement(b,{mode:"horizontal"===Le?"vertical":Le},r.createElement(L,{id:Pe,ref:ue},M)),disabled:se,onVisibleChange:function(e){"inline"!==H&&te(f,e)}},Re)}var Te=r.createElement(m.Item,n({role:"none"},B,{component:"li",style:c,className:i(le,"".concat(le,"-").concat(H),u,(s={},a(s,"".concat(le,"-open"),fe),a(s,"".concat(le,"-active"),Ne),a(s,"".concat(le,"-selected"),ve),a(s,"".concat(le,"-disabled"),se),s)),onMouseEnter:function(e){ge(!0),null==V||V({key:f,domEvent:e})},onMouseLeave:function(e){ge(!1),null==D||D({key:f,domEvent:e})}}),Re,!X&&r.createElement(O,{id:Pe,open:fe,keyPath:ie},M));return ae&&(Te=ae(Te,l,{selected:ve,active:Ne,open:fe,disabled:se})),r.createElement(b,{onItemClick:Ie,mode:"horizontal"===H?"vertical":H,itemIcon:pe,expandIcon:me},Te)};function A(e){var n,t=e.eventKey,o=e.children,a=E(t),i=v(o,a),l=y();return r.useEffect((function(){if(l)return l.registerPath(t,a),function(){l.unregisterPath(t,a)}}),[a]),n=l?i:r.createElement(z,e,i),r.createElement(M.Provider,{value:a},n)}export{A as S};
