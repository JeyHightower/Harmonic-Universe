import{r as e,j as r}from"./vendor-react-core.73efc664.js";import{u as a,a as t}from"./vendor-react-redux.ca23f922.js";import{f as s,c,u as i,d as n}from"./app-redux-character-thunks.c46623e8.js";import{c as o}from"./app-redux-character-slice.77cb9e4b.js";import"./app-characters-components.a508a592.js";import{D as d,a as l,b as m,c as h}from"./vendor-mui-dialogs.59185291.js";import{B as u}from"./vendor-mui-layout.b03fb29f.js";import{T as p}from"./vendor-mui-core.4359195f.js";import{T as f}from"./vendor-mui-inputs.b77362ac.js";import{B as j}from"./vendor-mui-buttons.74e6c144.js";const x=({open:x,type:v,sceneId:C,characterId:w})=>{const y=a(),{currentCharacter:b,loading:g,error:N}=t((e=>e.characters)),[D,W]=e.useState({name:"",description:""});e.useEffect((()=>{"edit"!==v&&"view"!==v||y(s(w))}),[y,v,w]),e.useEffect((()=>{b&&W({name:b.name,description:b.description||""})}),[b]);const B=e=>{const{name:r,value:a}=e.target;W((e=>({...e,[r]:a})))},E=()=>{y(o())};return!g||"edit"!==v&&"view"!==v?r.jsxs(d,{open:x,onClose:E,maxWidth:"sm",fullWidth:!0,className:"character-form-modal",children:[r.jsx(m,{children:(()=>{switch(v){case"create":return"Create New Character";case"edit":return"Edit Character";case"view":return"Character Details";case"delete":return"Delete Character";default:return"Character"}})()}),r.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{"create"===v?await y(c({...D,scene_id:C})):"edit"===v?await y(i({id:w,...D})):"delete"===v&&await y(n(w)),y(o())}catch(r){}},children:[r.jsx(l,{children:r.jsxs(u,{className:"character-form-content",children:[N&&r.jsx(p,{color:"error",className:"character-form-error",children:N}),"delete"!==v?r.jsxs(u,{children:[r.jsx(f,{autoFocus:!0,margin:"dense",name:"name",label:"Character Name",type:"text",fullWidth:!0,value:D.name,onChange:B,disabled:"view"===v,required:!0,className:"character-form-field"}),r.jsx(f,{margin:"dense",name:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,rows:4,value:D.description,onChange:B,disabled:"view"===v,className:"character-form-field"})]}):r.jsx(p,{children:"Are you sure you want to delete this character? This action cannot be undone."})]})}),r.jsxs(h,{className:"character-form-actions",children:[r.jsx(j,{onClick:E,children:"Cancel"}),"view"!==v&&r.jsx(j,{type:"submit",variant:"contained",color:"delete"===v?"error":"primary",disabled:g,children:g?"Deleting...":"create"===v?"Create":"Delete"})]})]})]}):r.jsx(d,{open:x,onClose:E,className:"character-form-modal",children:r.jsx(l,{children:r.jsx(u,{display:"flex",justifyContent:"center",p:3,children:r.jsx(CircularProgress,{})})})})};export{x as C};
