import{j as e,_ as n,l as t}from"./vendor-tone-esm.8edb30e2.js";import{r}from"./vendor-react-core.73efc664.js";import{dq as o}from"./vendor-tone-util.a79eb63f.js";import{C as a,w as c,a as u,b as i,d as l,e as f}from"./vendor-tone-modal.4772d80b.js";import"./vendor-tone-config-provider.2fc53c46.js";import{L as s}from"./vendor-tone-locale-provider.8d53e5b8.js";import{d as m}from"./vendor-tone-locale.9bc1cdd3.js";import{C as d}from"./vendor-tone-context.2287e470.js";var v=function(o,c){var u=o.afterClose,i=o.config,l=r.useState(!0),f=e(l,2),v=f[0],p=f[1],C=r.useState(i),x=e(C,2),g=x[0],j=x[1],E=r.useContext(d),k=E.direction,T=E.getPrefixCls,h=T("modal"),y=T(),w=function(){p(!1);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n.some((function(e){return e&&e.triggerCancel}));g.onCancel&&o&&g.onCancel.apply(g,[function(){}].concat(t(n.slice(1))))};return r.useImperativeHandle(c,(function(){return{destroy:w,update:function(e){j((function(t){return n(n({},t),e)}))}}})),r.createElement(s,{componentName:"Modal",defaultLocale:m.Modal},(function(e){return r.createElement(a,n({prefixCls:h,rootPrefixCls:y},g,{close:w,open:v,afterClose:u,okText:g.okText||(g.okCancel?e.okText:e.justOkText),direction:k,cancelText:g.cancelText||e.cancelText}))}))};const p=r.forwardRef(v);var C=0,x=r.memo(r.forwardRef((function(n,t){var a=o(),c=e(a,2),u=c[0],i=c[1];return r.useImperativeHandle(t,(function(){return{patchElement:i}}),[]),r.createElement(r.Fragment,null,u)})));function g(){var n=r.useRef(null),o=r.useState([]),a=e(o,2),s=a[0],m=a[1];r.useEffect((function(){s.length&&(t(s).forEach((function(e){e()})),m([]))}),[s]);var d=r.useCallback((function(e){return function(o){var a;C+=1;var c,u=r.createRef(),i=r.createElement(p,{key:"modal-".concat(C),config:e(o),ref:u,afterClose:function(){null==c||c()}});return c=null===(a=n.current)||void 0===a?void 0:a.patchElement(i),{destroy:function(){function e(){var e;null===(e=u.current)||void 0===e||e.destroy()}u.current?e():m((function(n){return[].concat(t(n),[e])}))},update:function(e){function n(){var n;null===(n=u.current)||void 0===n||n.update(e)}u.current?n():m((function(e){return[].concat(t(e),[n])}))}}}}),[]);return[r.useMemo((function(){return{info:d(c),success:d(u),error:d(i),warning:d(l),confirm:d(f)}}),[]),r.createElement(x,{ref:n})]}export{g as u};
