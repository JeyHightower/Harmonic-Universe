import{c as e}from"./vendor-redux-toolkit.fa18e013.js";import s from"./app-services-api.399edcf9.js";const a=e=>{var s,a,r,t;return{message:(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.message)||e.message||"An error occurred",status:null==(r=e.response)?void 0:r.status,data:null==(t=e.response)?void 0:t.data}},r=e=>{if(!e)return null;return{...e,created_at:e.created_at?e.created_at.toString():null,updated_at:e.updated_at?e.updated_at.toString():null}},t=e=>e&&Array.isArray(e)?e.map(r):[],n=e("universe/fetchUniverses",(async(e={},{rejectWithValue:r})=>{try{const a=await s.getUniverses(e);let r=[];return r=a.data&&Array.isArray(a.data.universes)?t(a.data.universes):Array.isArray(a.data)?t(a.data):a.universes&&Array.isArray(a.universes)?t(a.universes):a.data&&a.data.data&&Array.isArray(a.data.data.universes)?t(a.data.data.universes):Array.isArray(a)?t(a):[],{universes:r}}catch(n){return r(a(n))}})),i=e("universe/fetchUniverseById",(async({id:e,includeScenes:t=!1},{rejectWithValue:n})=>{try{const a=await s.getUniverse(e);return a&&a.data&&a.data.universe?a.data.universe=r(a.data.universe):a&&a.universe&&(a.universe=r(a.universe)),a.data||a}catch(i){return n(a(i))}})),u=e("universe/createUniverse",(async(e,{rejectWithValue:a})=>{var t,n,i,u,d,c;try{if(!e.name)return a({message:"Universe name is required",status:400});const t={name:e.name,description:e.description||"",is_public:void 0===e.is_public||e.is_public},n=await s.createUniverse(t);return n.data&&n.data.universe?n.data.universe:n.universe?r(n.universe):n.id?r(n):n.data&&n.data.id?r(n.data):n.data||n}catch(o){return a({message:(null==(n=null==(t=o.response)?void 0:t.data)?void 0:n.message)||(null==(u=null==(i=o.response)?void 0:i.data)?void 0:u.error)||o.message||"Error creating universe",status:null==(d=o.response)?void 0:d.status,data:null==(c=o.response)?void 0:c.data})}})),d=e("universe/updateUniverse",(async({id:e,...t},{rejectWithValue:n})=>{var i,u;try{const a=await s.updateUniverse(e,t);let n;return a&&a.data&&a.data.universe?(n=r(a.data.universe),{...a.data,universe:n}):a&&a.universe?(n=r(a.universe),{universe:n}):a&&a.data?a.data:a&&a.id?r(a):a}catch(d){if(d.response&&403===d.response.status)return n({message:"You don't have permission to update this universe"});if(d.response&&404===d.response.status)return n({message:"Universe not found"});if(d.response&&405===d.response.status)return n({message:"Method not allowed - please check API endpoint configuration"});if(d.response&&500===d.response.status){return n({message:(null==(i=d.response.data)?void 0:i.error)||(null==(u=d.response.data)?void 0:u.message)||"Server error while updating universe"})}return n(a(d))}})),c=e("universe/deleteUniverse",(async(e,{rejectWithValue:r})=>{var t,n,i;try{return{id:e,message:(null==(t=(await s.deleteUniverse(e)).data)?void 0:t.message)||"Universe deleted successfully"}}catch(u){if(u.response&&403===u.response.status)return r({message:"You don't have permission to delete this universe"});if(u.response&&404===u.response.status)return r({message:"Universe not found"});if(u.response&&500===u.response.status){return r({message:(null==(n=u.response.data)?void 0:n.error)||(null==(i=u.response.data)?void 0:i.message)||"Server error while deleting universe"})}return r(a(u))}}));e("universe/fetchScenesForUniverse",(async(e,{rejectWithValue:r})=>{try{const a=await s.getScenes(e);return a.data||a}catch(t){return r(a(t))}}));const o=e("universe/updatePhysicsParams",(async({universeId:e,physicsParams:t},{rejectWithValue:n})=>{try{const a=await s.updateUniverse(e,{physics_params:t});if(a&&a.data&&a.data.universe)a.data.universe=r(a.data.universe);else if(a&&a.universe)a.universe=r(a.universe);else if(a&&a.id)return r(a);return a.data||a}catch(i){return n(a(i))}})),v=e("universe/updateHarmonyParams",(async({universeId:e,harmonyParams:t},{rejectWithValue:n})=>{try{const a=await s.updateUniverse(e,{harmony_params:t});if(a&&a.data&&a.data.universe)a.data.universe=r(a.data.universe);else if(a&&a.universe)a.universe=r(a.universe);else if(a&&a.id)return r(a);return a.data||a}catch(i){return n(a(i))}})),l=e=>{var s,a,r,t;return{message:(null==(a=null==(s=e.response)?void 0:s.data)?void 0:a.message)||e.message||"An error occurred",status:null==(r=e.response)?void 0:r.status,data:null==(t=e.response)?void 0:t.data}},p=e("physicsObjects/fetchPhysicsObjects",(async(e,{rejectWithValue:a})=>{try{return(await s.getPhysicsObjectsForScene(e)).data||[]}catch(r){return a(l(r))}})),y=e("physicsObjects/createPhysicsObject",(async(e,{rejectWithValue:a})=>{try{return(await s.createPhysicsObject(e)).data}catch(r){return a(l(r))}})),h=e("physicsObjects/updatePhysicsObject",(async({id:e,data:a},{rejectWithValue:r})=>{try{return(await s.updatePhysicsObject(e,a)).data}catch(t){return r(l(t))}})),m=e("physicsObjects/deletePhysicsObject",(async(e,{rejectWithValue:a})=>{try{return await s.deletePhysicsObject(e),e}catch(r){return a(l(r))}}));export{i as a,y as b,u as c,c as d,h as e,n as f,m as g,o as h,p as i,v as j,d as u};
