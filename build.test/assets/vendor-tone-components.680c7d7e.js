import{q as e,i as t,j as n,k as s,l as o,a as r,_ as i}from"./vendor-tone-esm.8edb30e2.js";import{r as a,j as l}from"./vendor-react-core.73efc664.js";import{c}from"./vendor-tone-classnames.ea5eadd4.js";import{aT as u,aU as d,aV as h,aW as p,aX as m,aY as v,aZ as f,M as g,a_ as x,a$ as y,b0 as _,al as C,av as w,b1 as b,a as S,g as P,e as k,b2 as T,b as D,D as E,d as j,o as I}from"./vendor-tone-util.a79eb63f.js";import{r as A}from"./vendor-react-dom.e7130502.js";import{c as R}from"./vendor-tone-dist.6485732f.js";import{s as N,E as V,T as M,M as L,P as B,l as O,x as H,j as z}from"./vendor-mui-core.4359195f.js";import{i as F}from"./vendor-tone-hooks.ee856eec.js";import{L as W}from"./vendor-tone-LocalizationProvider.b505657c.js";import{u as G}from"./vendor-tone-RtlProvider.df0b182e.js";import{x as q,y as $}from"./vendor-tone-icons.388eb8da.js";import{I as X}from"./vendor-mui-buttons.74e6c144.js";import{b as U,V as Y}from"./vendor-tone-constants.d67dcaf6.js";import{D as K,d as Z,a as J}from"./vendor-mui-dialogs.59185291.js";import{T as Q,o as ee,G as te,r as ne,t as se,d as oe,i as re,e as ie,f as ae,h as le,O as ce,j as ue,P as de,k as he}from"./vendor-tone-core-base.398f9a2a.js";import"./vendor-tone-audio.70450c41.js";import{_ as pe,a as me}from"./vendor-tone-tslib.f5f62bcb.js";import{S as ve,c as fe}from"./vendor-tone-signal.648ab60f.js";const ge=a.createContext({});var xe=["icon","className","onClick","style","primaryColor","secondaryColor"],ye={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var _e=function(n){var s=n.icon,o=n.className,r=n.onClick,i=n.style,a=n.primaryColor,l=n.secondaryColor,c=e(n,xe),v=ye;if(a&&(v={primaryColor:a,secondaryColor:l||u(a)}),d(),h(p(s),"icon should be icon definiton, but got ".concat(s)),!p(s))return null;var f=s;return f&&"function"==typeof f.icon&&(f=t(t({},f),{},{icon:f.icon(v.primaryColor,v.secondaryColor)})),m(f.icon,"svg-".concat(f.name),t({className:o,onClick:r,style:i,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c))};_e.displayName="IconReact",_e.getTwoToneColors=function(){return t({},ye)},_e.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;ye.primaryColor=t,ye.secondaryColor=n||u(t),ye.calculated=!!n};const Ce=_e;function we(e){var t=v(e),s=n(t,2),o=s[0],r=s[1];return Ce.setTwoToneColors({primaryColor:o,secondaryColor:r})}function be(){var e=Ce.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Se=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];we("#1890ff");var Pe=a.forwardRef((function(o,r){var i=o.className,l=o.icon,u=o.spin,d=o.rotate,h=o.tabIndex,p=o.onClick,m=o.twoToneColor,f=e(o,Se),g=a.useContext(ge),x=g.prefixCls,y=void 0===x?"anticon":x,_=g.rootClassName,C=c(_,y,s(s({},"".concat(y,"-").concat(l.name),!!l.name),"".concat(y,"-spin"),!!u||"loading"===l.name),i),w=h;void 0===w&&p&&(w=-1);var b=d?{msTransform:"rotate(".concat(d,"deg)"),transform:"rotate(".concat(d,"deg)")}:void 0,S=v(m),P=n(S,2),k=P[0],T=P[1];return a.createElement("span",t(t({role:"img","aria-label":l.name},f),{},{ref:r,tabIndex:w,onClick:p,className:C}),a.createElement(Ce,{icon:l,primaryColor:k,secondaryColor:T,style:b}))}));Pe.displayName="AntdIcon",Pe.getTwoToneColor=be,Pe.setTwoToneColor=we;const ke=Pe;var Te=a.createContext(null),De=[];var Ee="rc-util-locker-".concat(Date.now()),je=0;function Ie(e){var t=!!e,s=a.useState((function(){return je+=1,"".concat(Ee,"_").concat(je)})),o=n(s,1)[0];g((function(){if(t){var e=x(document.body).width,n=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;y("\nhtml body {\n  overflow-y: hidden;\n  ".concat(n?"width: calc(100% - ".concat(e,"px);"):"","\n}"),o)}else _(o);return function(){_(o)}}),[t,o])}var Ae=!1;var Re=function(e){return!1!==e&&(f()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)},Ne=a.forwardRef((function(e,t){var s=e.open,r=e.autoLock,i=e.getContainer;e.debug;var l=e.autoDestroy,c=void 0===l||l,u=e.children,d=a.useState(s),h=n(d,2),p=h[0],m=h[1],v=p||s;a.useEffect((function(){(c||s)&&m(s)}),[s,c]);var x=a.useState((function(){return Re(i)})),y=n(x,2),_=y[0],b=y[1];a.useEffect((function(){var e=Re(i);b(null!=e?e:null)}));var S=function(e){var t=a.useState((function(){return f()?document.createElement("div"):null})),s=n(t,1)[0],r=a.useRef(!1),i=a.useContext(Te),l=a.useState(De),c=n(l,2),u=c[0],d=c[1],h=i||(r.current?void 0:function(e){d((function(t){return[e].concat(o(t))}))});function p(){s.parentElement||document.body.appendChild(s),r.current=!0}function m(){var e;null===(e=s.parentElement)||void 0===e||e.removeChild(s),r.current=!1}return g((function(){return e?i?i(p):p():m(),m}),[e]),g((function(){u.length&&(u.forEach((function(e){return e()})),d(De))}),[u]),[s,h]}(v&&!_),P=n(S,2),k=P[0],T=P[1],D=null!=_?_:k;Ie(r&&s&&f()&&(D===k||D===document.body));var E=null;u&&C(u)&&t&&(E=u.ref);var j=w(E,t);if(!v||!f()||void 0===_)return null;var I,R=!1===D||("boolean"==typeof I&&(Ae=I),Ae),N=u;return t&&(N=a.cloneElement(u,{ref:j})),a.createElement(Te.Provider,{value:T},R?N:A.createPortal(N,D))})),Ve=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],Me=a.forwardRef((function(n,o){var r=n.className,i=n.component,l=n.viewBox,u=n.spin,p=n.rotate,m=n.tabIndex,v=n.onClick,f=n.children,g=e(n,Ve);h(Boolean(i||f),"Should have `component` prop or `children`."),d();var x=a.useContext(ge),y=x.prefixCls,_=void 0===y?"anticon":y,C=x.rootClassName,w=c(C,_,r),S=c(s({},"".concat(_,"-spin"),!!u)),P=p?{msTransform:"rotate(".concat(p,"deg)"),transform:"rotate(".concat(p,"deg)")}:void 0,k=t(t({},b),{},{className:S,style:P,viewBox:l});l||delete k.viewBox;var T=m;return void 0===T&&v&&(T=-1),a.createElement("span",t(t({role:"img"},g),{},{ref:o,tabIndex:T,onClick:v,className:w}),i?a.createElement(i,t({},k),f):f?(h(Boolean(l)||1===a.Children.count(f)&&a.isValidElement(f)&&"use"===a.Children.only(f).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),a.createElement("svg",t(t({},k),{},{viewBox:l}),f)):null)}));Me.displayName="AntdIcon";const Le=Me;var Be=["type","children"],Oe=new Set;function He(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=e[n];if(t=s,Boolean("string"==typeof t&&t.length&&!Oe.has(t))){var o=document.createElement("script");o.setAttribute("src",s),o.setAttribute("data-namespace",s),e.length>n+1&&(o.onload=function(){He(e,n+1)},o.onerror=function(){He(e,n+1)}),Oe.add(s),document.body.appendChild(o)}}function ze(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=n.scriptUrl,o=n.extraCommonProps,r=void 0===o?{}:o;s&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(s)?He(s.reverse()):He([s]));var i=a.forwardRef((function(n,s){var o=n.type,i=n.children,l=e(n,Be),c=null;return n.type&&(c=a.createElement("use",{xlinkHref:"#".concat(o)})),i&&(c=i),a.createElement(Le,t(t(t({},r),l),{},{ref:s}),c)}));return i.displayName="Iconfont",i}function Fe(e){return S("MuiPickersToolbar",e)}P("MuiPickersToolbar",["root","content"]);const We=["children","className","toolbarTitle","hidden","titleId","isLandscape","classes","landscapeDirection"],Ge=N("div",{name:"MuiPickersToolbar",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",padding:e.spacing(2,3),variants:[{props:{isLandscape:!0},style:{height:"auto",maxWidth:160,padding:16,justifyContent:"flex-start",flexWrap:"wrap"}}]}))),qe=N("div",{name:"MuiPickersToolbar",slot:"Content",overridesResolver:(e,t)=>t.content})({display:"flex",flexWrap:"wrap",width:"100%",flex:1,justifyContent:"space-between",alignItems:"center",flexDirection:"row",variants:[{props:{isLandscape:!0},style:{justifyContent:"flex-start",alignItems:"flex-start",flexDirection:"column"}},{props:{isLandscape:!0,landscapeDirection:"row"},style:{flexDirection:"row"}}]}),$e=a.forwardRef((function(e,t){const n=V({props:e,name:"MuiPickersToolbar"}),{children:s,className:o,toolbarTitle:a,hidden:c,titleId:u}=n,d=r(n,We),h=n,p=(e=>{const{classes:t}=e;return k({root:["root"],content:["content"]},Fe,t)})(h);return c?null:l.jsxs(Ge,i({ref:t,className:R(p.root,o),ownerState:h},d,{children:[l.jsx(M,{color:"text.secondary",variant:"overline",id:u,children:a}),l.jsx(qe,{className:p.content,ownerState:h,children:s})]}))}));function Xe(e){return S("MuiPickersPopper",e)}P("MuiPickersPopper",["root","paper"]);const Ue=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],Ye=N(L,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({zIndex:e.zIndex.modal}))),Ke=N(B,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(e,t)=>t.paper})({outline:0,transformOrigin:"top center",variants:[{props:({placement:e})=>["top","top-start","top-end"].includes(e),style:{transformOrigin:"bottom center"}}]});const Ze=a.forwardRef(((e,t)=>{const{PaperComponent:n,popperPlacement:s,ownerState:o,children:a,paperSlotProps:c,paperClasses:u,onPaperClick:d,onPaperTouchStart:h}=e,p=r(e,Ue),m=i({},o,{placement:s}),v=E({elementType:n,externalSlotProps:c,additionalProps:{tabIndex:-1,elevation:8,ref:t},className:u,ownerState:m});return l.jsx(n,i({},p,v,{onClick:e=>{var t;d(e),null==(t=v.onClick)||t.call(v,e)},onTouchStart:e=>{var t;h(e),null==(t=v.onTouchStart)||t.call(v,e)},ownerState:m,children:a}))}));function Je(e){const t=V({props:e,name:"MuiPickersPopper"}),{anchorEl:n,children:s,containerRef:o=null,shouldRestoreFocus:r,onBlur:c,onDismiss:u,open:d,role:h,placement:p,slots:m,slotProps:v,reduceAnimations:f}=t;a.useEffect((()=>{function e(e){d&&"Escape"===e.key&&u()}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[u,d]);const g=a.useRef(null);a.useEffect((()=>{"tooltip"===h||r&&!r()||(d?g.current=T(document):g.current&&g.current instanceof HTMLElement&&setTimeout((()=>{g.current instanceof HTMLElement&&g.current.focus()})))}),[d,h,r]);const[x,y,_]=function(e,t){const n=a.useRef(!1),s=a.useRef(!1),o=a.useRef(null),r=a.useRef(!1);a.useEffect((()=>{if(e)return document.addEventListener("mousedown",t,!0),document.addEventListener("touchstart",t,!0),()=>{document.removeEventListener("mousedown",t,!0),document.removeEventListener("touchstart",t,!0),r.current=!1};function t(){r.current=!0}}),[e]);const i=j((e=>{if(!r.current)return;const i=s.current;s.current=!1;const a=I(o.current);if(!o.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,a))return;if(n.current)return void(n.current=!1);let l;l=e.composedPath?e.composedPath().indexOf(o.current)>-1:!a.documentElement.contains(e.target)||o.current.contains(e.target),l||i||t(e)})),l=()=>{s.current=!0};return a.useEffect((()=>{if(e){const e=I(o.current),t=()=>{n.current=!0};return e.addEventListener("touchstart",i),e.addEventListener("touchmove",t),()=>{e.removeEventListener("touchstart",i),e.removeEventListener("touchmove",t)}}}),[e,i]),a.useEffect((()=>{if(e){const e=I(o.current);return e.addEventListener("click",i),()=>{e.removeEventListener("click",i),s.current=!1}}}),[e,i]),[o,l,l]}(d,c??u),C=a.useRef(null),w=D(C,o),b=D(w,x),S=t,P=(e=>{const{classes:t}=e;return k({root:["root"],paper:["paper"]},Xe,t)})(S),A=F(),R=f??A,N=(null==m?void 0:m.desktopTransition)??R?O:H,M=(null==m?void 0:m.desktopTrapFocus)??z,L=(null==m?void 0:m.desktopPaper)??Ke,B=(null==m?void 0:m.popper)??Ye,W=E({elementType:B,externalSlotProps:null==v?void 0:v.popper,additionalProps:{transition:!0,role:h,open:d,anchorEl:n,placement:p,onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),u())}},className:P.root,ownerState:t});return l.jsx(B,i({},W,{children:({TransitionProps:e,placement:t})=>l.jsx(M,i({open:d,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:"tooltip"===h,isEnabled:()=>!0},null==v?void 0:v.desktopTrapFocus,{children:l.jsx(N,i({},e,null==v?void 0:v.desktopTransition,{children:l.jsx(Ze,{PaperComponent:L,ownerState:S,popperPlacement:t,ref:b,onPaperClick:y,onPaperTouchStart:_,paperClasses:P.paper,paperSlotProps:null==v?void 0:v.desktopPaper,children:s})}))}))}))}const Qe=a.createContext(null);function et(e){const{contextValue:t,localeText:n,children:s}=e;return l.jsx(Qe.Provider,{value:t,children:l.jsx(W,{localeText:n,children:s})})}function tt(e){return S("MuiPickersArrowSwitcher",e)}P("MuiPickersArrowSwitcher",["root","spacer","button","previousIconButton","nextIconButton","leftArrowIcon","rightArrowIcon"]);const nt=["children","className","slots","slotProps","isNextDisabled","isNextHidden","onGoToNext","nextLabel","isPreviousDisabled","isPreviousHidden","onGoToPrevious","previousLabel","labelId"],st=["ownerState"],ot=["ownerState"],rt=N("div",{name:"MuiPickersArrowSwitcher",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex"}),it=N("div",{name:"MuiPickersArrowSwitcher",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})((({theme:e})=>({width:e.spacing(3)}))),at=N(X,{name:"MuiPickersArrowSwitcher",slot:"Button",overridesResolver:(e,t)=>t.button})({variants:[{props:{hidden:!0},style:{visibility:"hidden"}}]}),lt=a.forwardRef((function(e,t){const n=G(),s=V({props:e,name:"MuiPickersArrowSwitcher"}),{children:o,className:a,slots:c,slotProps:u,isNextDisabled:d,isNextHidden:h,onGoToNext:p,nextLabel:m,isPreviousDisabled:v,isPreviousHidden:f,onGoToPrevious:g,previousLabel:x,labelId:y}=s,_=r(s,nt),C=s,w=(e=>{const{classes:t}=e;return k({root:["root"],spacer:["spacer"],button:["button"],previousIconButton:["previousIconButton"],nextIconButton:["nextIconButton"],leftArrowIcon:["leftArrowIcon"],rightArrowIcon:["rightArrowIcon"]},tt,t)})(C),b={isDisabled:d,isHidden:h,goTo:p,label:m},S={isDisabled:v,isHidden:f,goTo:g,label:x},P=(null==c?void 0:c.previousIconButton)??at,T=E({elementType:P,externalSlotProps:null==u?void 0:u.previousIconButton,additionalProps:{size:"medium",title:S.label,"aria-label":S.label,disabled:S.isDisabled,edge:"end",onClick:S.goTo},ownerState:i({},C,{hidden:S.isHidden}),className:R(w.button,w.previousIconButton)}),D=(null==c?void 0:c.nextIconButton)??at,j=E({elementType:D,externalSlotProps:null==u?void 0:u.nextIconButton,additionalProps:{size:"medium",title:b.label,"aria-label":b.label,disabled:b.isDisabled,edge:"start",onClick:b.goTo},ownerState:i({},C,{hidden:b.isHidden}),className:R(w.button,w.nextIconButton)}),I=(null==c?void 0:c.leftArrowIcon)??q,A=E({elementType:I,externalSlotProps:null==u?void 0:u.leftArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:C,className:w.leftArrowIcon}),N=r(A,st),L=(null==c?void 0:c.rightArrowIcon)??$,B=E({elementType:L,externalSlotProps:null==u?void 0:u.rightArrowIcon,additionalProps:{fontSize:"inherit"},ownerState:C,className:w.rightArrowIcon}),O=r(B,ot);return l.jsxs(rt,i({ref:t,className:R(w.root,a),ownerState:C},_,{children:[l.jsx(P,i({},T,{children:n?l.jsx(L,i({},O)):l.jsx(I,i({},N))})),o?l.jsx(M,{variant:"subtitle1",component:"span",id:y,children:o}):l.jsx(it,{className:w.spacer,ownerState:C}),l.jsx(D,i({},j,{children:n?l.jsx(I,i({},N)):l.jsx(L,i({},O))}))]}))})),ct=N("div")({overflow:"hidden",width:U,maxHeight:Y,display:"flex",flexDirection:"column",margin:"0 auto"}),ut=N(K)({[`& .${Z.container}`]:{outline:0},[`& .${Z.paper}`]:{outline:0,minWidth:U}}),dt=N(J)({"&:first-of-type":{padding:0}});function ht(e){const{children:t,onDismiss:n,open:s,slots:o,slotProps:r}=e,a=(null==o?void 0:o.dialog)??ut,c=(null==o?void 0:o.mobileTransition)??O;return l.jsx(a,i({open:s,onClose:n},null==r?void 0:r.dialog,{TransitionComponent:c,TransitionProps:null==r?void 0:r.mobileTransition,PaperComponent:null==o?void 0:o.mobilePaper,PaperProps:null==r?void 0:r.mobilePaper,children:l.jsx(dt,{children:t})}))}class pt extends Q{constructor(){super(ee(pt.getDefaults(),arguments,["volume"])),this.name="Volume";const e=ee(pt.getDefaults(),arguments,["volume"]);this.input=this.output=new te({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ne(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Q.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class mt extends Q{constructor(){super(ee(mt.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ve({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=ee(mt.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Q.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(re(e))return e;{let n;for(n in vt)if(vt[n][t]===e)return n;return e}}_setCurve(e,t,n){if(re(n)&&Reflect.has(vt,n)){const s=vt[n];ie(s)?"_decayCurve"!==e&&(this[e]=s[t]):this[e]=s}else{if(!ae(n)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+n);this[e]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){n=(1-o)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,n,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,n,e);else{this._sig.cancelAndHoldAtTime(e);let s=this._attackCurve;for(let e=1;e<s.length;e++)if(s[e-1]<=o&&o<=s[e]){s=this._attackCurve.slice(e),s[0]=o;break}this._sig.setValueCurveAtTime(s,e,n,t)}if(s&&this.sustain<1){const o=t*this.sustain,r=e+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(o,s+r):this._sig.exponentialApproachValueAtTime(o,r,s)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(le(ae(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,n=1){return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,n=0){return fe(this,e,t,n),this}asArray(e=1024){return me(this,void 0,void 0,(function*(){const t=e/this.context.sampleRate,n=new ce(1,t,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=s+this.toSeconds(this.release),r=.1*o,i=o+r,a=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/i,decay:t*this.toSeconds(this.decay)/i,release:t*this.toSeconds(this.release)/i,context:n}));a._sig.toDestination(),a.triggerAttackRelease(t*(s+r)/i,0);return(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}pe([se(0)],mt.prototype,"attack",void 0),pe([se(0)],mt.prototype,"decay",void 0),pe([oe(0,1)],mt.prototype,"sustain",void 0),pe([se(0)],mt.prototype,"release",void 0);const vt=(()=>{const e=128;let t,n;const s=[];for(t=0;t<e;t++)s[t]=Math.sin(t/127*(Math.PI/2));const o=[];for(t=0;t<127;t++){n=t/127;const e=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;o[t]=e/10+.83*n}o[127]=1;const r=[];for(t=0;t<e;t++)r[t]=Math.ceil(t/127*5)/5;const i=[];for(t=0;t<e;t++)n=t/127,i[t]=.5*(1-Math.cos(Math.PI*n));const a=[];for(t=0;t<e;t++){n=t/127;const e=4*Math.pow(n,3)+.2,s=Math.cos(e*Math.PI*2*n);a[t]=Math.abs(s*(1-n))}function l(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=1-e[n];return t}return{bounce:{In:l(a),Out:a},cosine:{In:s,Out:(c=s,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:o,Out:l(o)},sine:{In:i,Out:l(i)},step:{In:r,Out:l(r)}};var c})();class ft extends mt{constructor(){super(ee(ft.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new te({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}ue("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class gt extends Q{constructor(){super(Object.assign(ee(gt.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=ee(gt.getDefaults(),arguments,["pan"]);this.pan=new de({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ne(this,"pan")}static getDefaults(){return Object.assign(Q.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class xt extends Q{constructor(){super(ee(xt.getDefaults(),arguments,["channels"])),this.name="Split";const e=ee(xt.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Q.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class yt extends Q{constructor(){super(ee(yt.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const e=ee(yt.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new te({context:this.context}),this._split=new xt({context:this.context,channels:e.channels}),this.input.connect(this._split),he(e.channels,1);for(let t=0;t<e.channels;t++)this._analysers[t]=this.context.createAnalyser(),this._split.connect(this._analysers[t],t,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(Q.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach(((e,t)=>{const n=this._buffers[t];"fft"===this._type?e.getFloatFrequencyData(n):"waveform"===this._type&&e.getFloatTimeDomainData(n)})),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach(((t,n)=>{t.fftSize=2*e,this._buffers[n]=new Float32Array(e)}))}get channels(){return this._analysers.length}get type(){return this._type}set type(e){le("waveform"===e||"fft"===e,`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach((t=>t.smoothingTimeConstant=e))}dispose(){return super.dispose(),this._analysers.forEach((e=>e.disconnect())),this._split.dispose(),this._gain.dispose(),this}}class _t extends Q{constructor(){super(ee(_t.getDefaults(),arguments,["solo"])),this.name="Solo";const e=ee(_t.getDefaults(),arguments,["solo"]);this.input=this.output=new te({context:this.context}),_t._allSolos.has(this.context)||_t._allSolos.set(this.context,new Set),_t._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Q.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),_t._allSolos.get(this.context).forEach((e=>e._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){_t._soloed.has(this.context)||_t._soloed.set(this.context,new Set),_t._soloed.get(this.context).add(this)}_removeSolo(){_t._soloed.has(this.context)&&_t._soloed.get(this.context).delete(this)}_isSoloed(){return _t._soloed.has(this.context)&&_t._soloed.get(this.context).has(this)}_noSolos(){return!_t._soloed.has(this.context)||_t._soloed.has(this.context)&&0===_t._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),_t._allSolos.get(this.context).delete(this),this._removeSolo(),this}}_t._allSolos=new Map,_t._soloed=new Map;class Ct extends Q{constructor(){super(ee(Ct.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=ee(Ct.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new gt({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new pt({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ne(this,["pan","volume"])}static getDefaults(){return Object.assign(Q.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class wt extends Q{constructor(){super(ee(wt.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=ee(wt.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new _t({solo:e.solo,context:this.context}),this._panVol=this.output=new Ct({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ne(this,["pan","volume"])}static getDefaults(){return Object.assign(Q.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return wt.buses.has(e)||wt.buses.set(e,new te({context:this.context})),wt.buses.get(e)}send(e,t=0){const n=this._getBus(e),s=new te({context:this.context,units:"decibels",gain:t});return this.connect(s),s.connect(n),s}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}wt.buses=new Map;export{yt as A,ge as C,mt as E,Le as I,ct as P,pt as V,$e as a,lt as b,Ne as c,ze as d,ke as e,ft as f,be as g,et as h,Je as i,ht as j,we as s};
