import{_ as e}from"./vendor-tone-esm.8edb30e2.js";import{r as t}from"./vendor-react-core.73efc664.js";import{u as n}from"./vendor-tone-RtlProvider.df0b182e.js";import{c as r,e as o,b as a,aq as l}from"./vendor-tone-hooks.ee856eec.js";import{d2 as s,d3 as i,d4 as c,d5 as u,d6 as d,d7 as p,d8 as f,d9 as m,w as g,da as S,db as h,dc as v,d as y,dd as V,de as x,df as I,dg as D,dh as T,b as M,t as b,b2 as F,q as w,di as A,dj as k,dk as C,dl as E,dm as P,dn as R}from"./vendor-tone-util.a79eb63f.js";import{u as O}from"./vendor-tone-validation.226ee14c.js";const z=(e,t,n,r)=>{switch(n.type){case"year":return t.fieldYearPlaceholder({digitAmount:e.formatByString(e.date(void 0,"default"),r).length,format:r});case"month":return t.fieldMonthPlaceholder({contentType:n.contentType,format:r});case"day":return t.fieldDayPlaceholder({format:r});case"weekDay":return t.fieldWeekDayPlaceholder({contentType:n.contentType,format:r});case"hours":return t.fieldHoursPlaceholder({format:r});case"minutes":return t.fieldMinutesPlaceholder({format:r});case"seconds":return t.fieldSecondsPlaceholder({format:r});case"meridiem":return t.fieldMeridiemPlaceholder({format:r});default:return r}},L=({utils:t,date:n,shouldRespectLeadingZeros:r,localeText:o,localizedDigits:a,now:l,token:p,startSeparator:f})=>{if(""===p)throw new Error("MUI X: Should not call `commitToken` with an empty token");const m=s(t,p),g=i(t,m.contentType,m.type,p),S=r?g:"digit"===m.contentType,h=null!=n&&t.isValid(n);let v=h?t.formatByString(n,p):"",y=null;if(S)if(g)y=""===v?t.formatByString(l,p).length:v.length;else{if(null==m.maxLength)throw new Error(`MUI X: The token ${p} should have a 'maxDigitNumber' property on it's adapter`);y=m.maxLength,h&&(v=c(u(d(v,a),y),a))}return e({},m,{format:p,maxLength:y,value:v,placeholder:z(t,o,m,p),hasLeadingZerosInFormat:g,hasLeadingZerosInInput:S,startSeparator:f,endSeparator:"",modified:!1})},$=t=>{let n=(({utils:e,format:t})=>{let n=10,r=t,o=e.expandFormat(t);for(;o!==r;)if(r=o,o=e.expandFormat(r),n-=1,n<0)throw new Error("MUI X: The format expansion seems to be in an infinite loop. Please open an issue with the format passed to the picker component.");return o})(t);t.isRtl&&t.enableAccessibleFieldDOMStructure&&(n=n.split(" ").reverse().join(" "));const r=(({utils:e,expandedFormat:t})=>{const n=[],{start:r,end:o}=e.escapedCharacters,a=new RegExp(`(\\${r}[^\\${o}]*\\${o})+`,"g");let l=null;for(;l=a.exec(t);)n.push({start:l.index,end:a.lastIndex-1});return n})(e({},t,{expandedFormat:n})),o=(t=>{var n;const{utils:r,expandedFormat:o,escapedParts:a}=t,l=r.date(void 0),s=[];let i="";const c=Object.keys(r.formatTokenMap).sort(((e,t)=>t.length-e.length)),u=/^([a-zA-Z]+)/,d=new RegExp(`^(${c.join("|")})*$`),p=new RegExp(`^(${c.join("|")})`),f=e=>a.find((t=>t.start<=e&&t.end>=e));let m=0;for(;m<o.length;){const r=f(m),a=null!=r,c=null==(n=u.exec(o.slice(m)))?void 0:n[1];if(!a&&null!=c&&d.test(c)){let n=c;for(;n.length>0;){const r=p.exec(n)[1];n=n.slice(r.length),s.push(L(e({},t,{now:l,token:r,startSeparator:i}))),i=""}m+=c.length}else{const e=o[m];a&&(null==r?void 0:r.start)===m||(null==r?void 0:r.end)===m||(0===s.length?i+=e:s[s.length-1].endSeparator+=e),m+=1}}return 0===s.length&&i.length>0&&s.push({type:"empty",contentType:"letter",maxLength:null,format:"",value:"",placeholder:"",hasLeadingZerosInFormat:!1,hasLeadingZerosInInput:!1,startSeparator:i,endSeparator:"",modified:!1}),s})(e({},t,{expandedFormat:n,escapedParts:r}));return(({isRtl:e,formatDensity:t,sections:n})=>n.map((n=>{const r=n=>{let r=n;return e&&null!==r&&r.includes(" ")&&(r=`⁩${r}⁦`),"spacious"===t&&["/",".","-"].includes(r)&&(r=` ${r} `),r};return n.startSeparator=r(n.startSeparator),n.endSeparator=r(n.endSeparator),n})))(e({},t,{sections:o}))},N=e=>null!=e.saveQuery,Z=({sections:n,updateSectionValue:o,sectionsValueBoundaries:a,localizedDigits:l,setTempAndroidValueStr:u,timezone:p})=>{const f=r(),[m,g]=t.useState(null),S=y((()=>g(null)));t.useEffect((()=>{var e;null!=m&&(null==(e=n[m.sectionIndex])?void 0:e.type)!==m.sectionType&&S()}),[n,m,S]),t.useEffect((()=>{if(null!=m){const e=setTimeout((()=>S()),5e3);return()=>{clearTimeout(e)}}return()=>{}}),[m,S]);const h=({keyPressed:e,sectionIndex:t},r,o)=>{const a=e.toLowerCase(),l=n[t];if(null!=m&&(!o||o(m.value))&&m.sectionIndex===t){const e=`${m.value}${a}`,n=r(e,l);if(!N(n))return g({sectionIndex:t,value:e,sectionType:l.type}),n}const s=r(a,l);return N(s)&&!s.saveQuery?(S(),null):(g({sectionIndex:t,value:a,sectionType:l.type}),N(s)?null:s)};return{applyCharacterEditing:y((t=>{const r=n[t.sectionIndex],m=V(t.keyPressed,l)?(t=>{const n=(e,t)=>{const n=d(e,l),r=Number(n),o=a[t.type]({currentDate:null,format:t.format,contentType:t.contentType});if(r>o.maximum)return{saveQuery:!1};if(r<o.minimum)return{saveQuery:!0};const s=10*r>o.maximum||n.length===o.maximum.toString().length;return{sectionValue:D(f,r,o,l,t),shouldGoToNextSection:s}};return h(t,((t,r)=>{if("digit"===r.contentType||"digit-with-letter"===r.contentType)return n(t,r);if("month"===r.type){const o=i(f,"digit","month","MM"),a=n(t,{type:r.type,format:"MM",hasLeadingZerosInFormat:o,hasLeadingZerosInInput:!0,contentType:"digit",maxLength:2});if(N(a))return a;const l=x(f,a.sectionValue,"MM",r.format);return e({},a,{sectionValue:l})}if("weekDay"===r.type){const o=n(t,r);if(N(o))return o;const a=I(f,r.format)[Number(o.sectionValue)-1];return e({},o,{sectionValue:a})}return{saveQuery:!1}}),(e=>V(e,l)))})(e({},t,{keyPressed:c(t.keyPressed,l)})):(t=>{const n=(e,t,n)=>{const r=t.filter((e=>e.toLowerCase().startsWith(n)));return 0===r.length?{saveQuery:!1}:{sectionValue:r[0],shouldGoToNextSection:1===r.length}},r=(t,r,o,a)=>{const l=e=>T(f,p,r.type,e);if("letter"===r.contentType)return n(r.format,l(r.format),t);if(o&&null!=a&&"letter"===s(f,o).contentType){const r=l(o),s=n(0,r,t);return N(s)?{saveQuery:!1}:e({},s,{sectionValue:a(s.sectionValue,r)})}return{saveQuery:!1}};return h(t,((e,t)=>{switch(t.type){case"month":{const n=e=>x(f,e,f.formats.month,t.format);return r(e,t,f.formats.month,n)}case"weekDay":{const n=(e,t)=>t.indexOf(e).toString();return r(e,t,f.formats.weekday,n)}case"meridiem":return r(e,t);default:return{saveQuery:!1}}}))})(t);null!=m?o({activeSection:r,newSectionValue:m.sectionValue,shouldGoToNextSection:m.shouldGoToNextSection}):u(null)})),resetCharacterQuery:S}},B=e=>{const{internalProps:{disabled:n,readOnly:a=!1},forwardedProps:{sectionListRef:l,onBlur:s,onClick:i,onFocus:c,onInput:u,onPaste:d,focused:p,autoFocus:f=!1},fieldValueManager:m,applyCharacterEditing:g,resetCharacterQuery:h,setSelectedSections:v,parsedSelectedSections:V,state:x,clearActiveSection:I,clearValue:D,updateSectionValue:T,updateValueFromValueStr:C,sectionOrder:E,areAllSectionsEmpty:P,sectionsValueBoundaries:R}=e,O=t.useRef(null),z=M(l,O),L=o(),$=r(),N=b(),[Z,B]=t.useState(!1),j=t.useMemo((()=>({syncSelectionToDOM:()=>{if(!O.current)return;const e=document.getSelection();if(!e)return;if(null==V)return e.rangeCount>0&&O.current.getRoot().contains(e.getRangeAt(0).startContainer)&&e.removeAllRanges(),void(Z&&O.current.getRoot().blur());if(!O.current.getRoot().contains(F(document)))return;const t=new window.Range;let n;if("all"===V)n=O.current.getRoot();else{n="empty"===x.sections[V].type?O.current.getSectionContainer(V):O.current.getSectionContent(V)}t.selectNodeContents(n),n.focus(),e.removeAllRanges(),e.addRange(t)},getActiveSectionIndexFromDOM:()=>{const e=F(document);return e&&O.current&&O.current.getRoot().contains(e)?O.current.getSectionIndexFromDOMElement(e):null},focusField:(e=0)=>{if(!O.current||null!=j.getActiveSectionIndexFromDOM())return;const t=S(e,x.sections);B(!0),O.current.getSectionContent(t).focus()},setSelectedSections:e=>{if(!O.current)return;const t=S(e,x.sections);B(null!==("all"===t?0:t)),v(e)},isFieldFocused:()=>{const e=F(document);return!!O.current&&O.current.getRoot().contains(e)}})),[V,v,x.sections,Z]),Q=y((e=>{if(!O.current)return;const t=x.sections[e];O.current.getSectionContent(e).innerHTML=t.value||t.placeholder,j.syncSelectionToDOM()})),G=y(((e,...t)=>{if(!e.isDefaultPrevented()&&O.current)if(B(!0),null==i||i(e,...t),"all"===V)setTimeout((()=>{const e=document.getSelection().getRangeAt(0).startOffset;if(0===e)return void v(E.startIndex);let t=0,n=0;for(;n<e&&t<x.sections.length;){const e=x.sections[t];t+=1,n+=`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`.length}v(t-1)}));else if(Z){O.current.getRoot().contains(e.target)||v(E.startIndex)}else B(!0),v(E.startIndex)})),H=y((e=>{if(null==u||u(e),!O.current||"all"!==V)return;const t=e.target.textContent??"";O.current.getRoot().innerHTML=x.sections.map((e=>`${e.startSeparator}${e.value||e.placeholder}${e.endSeparator}`)).join(""),j.syncSelectionToDOM(),0===t.length||10===t.charCodeAt(0)?(h(),D(),v("all")):t.length>1?C(t):("all"===V&&v(0),g({keyPressed:t,sectionIndex:0}))})),U=y((e=>{if(null==d||d(e),a||"all"!==V)return void e.preventDefault();const t=e.clipboardData.getData("text");e.preventDefault(),h(),C(t)})),K=y(((...e)=>{if(null==c||c(...e),Z||!O.current)return;B(!0);null!=O.current.getSectionIndexFromDOMElement(F(document))||v(E.startIndex)})),q=y(((...e)=>{null==s||s(...e),setTimeout((()=>{if(!O.current)return;const e=F(document);!O.current.getRoot().contains(e)&&(B(!1),v(null))}))})),X=y((e=>t=>{t.isDefaultPrevented()||v(e)})),W=y((e=>{e.preventDefault()})),Y=y((e=>()=>{v(e)})),_=y((e=>{if(e.preventDefault(),a||n||"number"!=typeof V)return;const t=x.sections[V],r=e.clipboardData.getData("text"),o=/^[a-zA-Z]+$/.test(r),l=/^[0-9]+$/.test(r),s=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(r);"letter"===t.contentType&&o||"digit"===t.contentType&&l||"digit-with-letter"===t.contentType&&s?(h(),T({activeSection:t,newSectionValue:r,shouldGoToNextSection:!0})):o||l||(h(),C(r))})),J=y((e=>{e.preventDefault(),e.dataTransfer.dropEffect="none"})),ee=y((e=>{if(!O.current)return;const t=e.target,n=t.textContent??"",r=O.current.getSectionIndexFromDOMElement(t),o=x.sections[r];if(!a&&O.current){if(0===n.length){if(""===o.value)return void Q(r);const t=e.nativeEvent.inputType;return"insertParagraph"===t||"insertLineBreak"===t?void Q(r):(h(),void I())}g({keyPressed:n,sectionIndex:r}),Q(r)}else Q(r)}));w((()=>{if(Z&&O.current)if("all"===V)O.current.getRoot().focus();else if("number"==typeof V){const e=O.current.getSectionContent(V);e&&e.focus()}}),[V,Z]);const te=t.useMemo((()=>x.sections.reduce(((e,t)=>(e[t.type]=R[t.type]({currentDate:null,contentType:t.contentType,format:t.format}),e)),{})),[R,x.sections]),ne="all"===V,re=t.useMemo((()=>x.sections.map(((e,r)=>{const o=!ne&&!n&&!a;return{container:{"data-sectionindex":r,onClick:X(r)},content:{tabIndex:ne||r>0?-1:0,contentEditable:!ne&&!n&&!a,role:"spinbutton",id:`${N}-${e.type}`,"aria-labelledby":`${N}-${e.type}`,"aria-readonly":a,"aria-valuenow":A(e,$),"aria-valuemin":te[e.type].minimum,"aria-valuemax":te[e.type].maximum,"aria-valuetext":e.value?k(e,$):L.empty,"aria-label":L[e.type],"aria-disabled":n,spellCheck:!o&&void 0,autoCapitalize:o?"off":void 0,autoCorrect:o?"off":void 0,[parseInt(t.version,10)>=17?"enterKeyHint":"enterkeyhint"]:o?"next":void 0,children:e.value||e.placeholder,onInput:ee,onPaste:_,onFocus:Y(r),onDragOver:J,onMouseUp:W,inputMode:"letter"===e.contentType?"text":"numeric"},before:{children:e.startSeparator},after:{children:e.endSeparator}}}))),[x.sections,Y,_,J,ee,X,W,n,a,ne,L,$,te,N]),oe=y((e=>{C(e.target.value)})),ae=t.useMemo((()=>P?"":m.getV7HiddenInputValueFromSections(x.sections)),[P,x.sections,m]);return t.useEffect((()=>{if(null==O.current)throw new Error(["MUI X: The `sectionListRef` prop has not been initialized by `PickersSectionList`","You probably tried to pass a component to the `textField` slot that contains an `<input />` element instead of a `PickersSectionList`.","","If you want to keep using an `<input />` HTML element for the editing, please remove the `enableAccessibleFieldDOMStructure` prop from your picker or field component:","","<DatePicker slots={{ textField: MyCustomTextField }} />","","Learn more about the field accessible DOM structure on the MUI documentation: https://mui.com/x/react-date-pickers/fields/#fields-to-edit-a-single-element"].join("\n"));f&&O.current&&O.current.getSectionContent(E.startIndex).focus()}),[]),{interactions:j,returnedValue:{autoFocus:f,readOnly:a,focused:p??Z,sectionListRef:z,onBlur:q,onClick:G,onFocus:K,onInput:H,onPaste:U,enableAccessibleFieldDOMStructure:!0,elements:re,tabIndex:0===V?-1:0,contentEditable:ne,value:ae,onChange:oe,areAllSectionsEmpty:P}}},j=e=>e.replace(/[\u2066\u2067\u2068\u2069]/g,""),Q=r=>{const o=n(),a=t.useRef(void 0),l=t.useRef(void 0),{forwardedProps:{onFocus:s,onClick:i,onPaste:c,onBlur:u,inputRef:d,placeholder:p},internalProps:{readOnly:f=!1,disabled:m=!1},parsedSelectedSections:g,activeSectionIndex:S,state:h,fieldValueManager:v,valueManager:V,applyCharacterEditing:x,resetCharacterQuery:I,updateSectionValue:D,updateValueFromValueStr:T,clearActiveSection:b,clearValue:w,setTempAndroidValueStr:A,setSelectedSections:k,getSectionsFromValue:P,areAllSectionsEmpty:R,localizedDigits:O}=r,z=t.useRef(null),L=M(d,z),$=t.useMemo((()=>((t,n,r)=>{let o=0,a=r?1:0;const l=[];for(let s=0;s<t.length;s+=1){const i=t[s],c=E(i,r?"input-rtl":"input-ltr",n),u=`${i.startSeparator}${c}${i.endSeparator}`,d=j(u).length,p=u.length,f=j(c),m=a+(""===f?0:c.indexOf(f[0]))+i.startSeparator.length,g=m+f.length;l.push(e({},i,{start:o,end:o+d,startInInput:m,endInInput:g})),o+=d,a+=p}return l})(h.sections,O,o)),[h.sections,O,o]),N=t.useMemo((()=>({syncSelectionToDOM:()=>{if(!z.current)return;if(null==g)return void(z.current.scrollLeft&&(z.current.scrollLeft=0));if(z.current!==F(document))return;const e=z.current.scrollTop;if("all"===g)z.current.select();else{const e=$[g],t="empty"===e.type?e.startInInput-e.startSeparator.length:e.startInInput,n="empty"===e.type?e.endInInput+e.endSeparator.length:e.endInInput;t===z.current.selectionStart&&n===z.current.selectionEnd||z.current===F(document)&&z.current.setSelectionRange(t,n),clearTimeout(l.current),l.current=setTimeout((()=>{!z.current||z.current!==F(document)||z.current.selectionStart!==z.current.selectionEnd||z.current.selectionStart===t&&z.current.selectionEnd===n||N.syncSelectionToDOM()}))}z.current.scrollTop=e},getActiveSectionIndexFromDOM:()=>{const e=z.current.selectionStart??0,t=z.current.selectionEnd??0;if(0===e&&0===t)return null;const n=e<=$[0].startInInput?1:$.findIndex((t=>t.startInInput-t.startSeparator.length>e));return-1===n?$.length-1:n-1},focusField:(e=0)=>{var t;F(document)!==z.current&&(null==(t=z.current)||t.focus(),k(e))},setSelectedSections:e=>k(e),isFieldFocused:()=>z.current===F(document)})),[z,g,$,k]),Z=()=>{const e=z.current.selectionStart??0;let t;t=e<=$[0].startInInput||e>=$[$.length-1].endInInput?1:$.findIndex((t=>t.startInInput-t.startSeparator.length>e));const n=-1===t?$.length-1:t-1;k(n)},B=y(((...e)=>{null==s||s(...e);const t=z.current;clearTimeout(a.current),a.current=setTimeout((()=>{t&&t===z.current&&null==S&&(t.value.length&&Number(t.selectionEnd)-Number(t.selectionStart)===t.value.length?k("all"):Z())}))})),Q=y(((e,...t)=>{e.isDefaultPrevented()||(null==i||i(e,...t),Z())})),G=y((e=>{if(null==c||c(e),e.preventDefault(),f||m)return;const t=e.clipboardData.getData("text");if("number"==typeof g){const e=h.sections[g],n=/^[a-zA-Z]+$/.test(t),r=/^[0-9]+$/.test(t),o=/^(([a-zA-Z]+)|)([0-9]+)(([a-zA-Z]+)|)$/.test(t);if("letter"===e.contentType&&n||"digit"===e.contentType&&r||"digit-with-letter"===e.contentType&&o)return I(),void D({activeSection:e,newSectionValue:t,shouldGoToNextSection:!0});if(n||r)return}I(),T(t)})),H=y(((...e)=>{null==u||u(...e),k(null)})),U=y((e=>{if(f)return;const t=e.target.value;if(""===t)return I(),void w();const n=e.nativeEvent.data,r=n&&n.length>1,a=r?n:t,l=j(a);if("all"===g&&k(S),null==S||r)return void T(r?n:l);let s;if("all"===g&&1===l.length)s=l;else{const e=j(v.getV6InputValueFromSections($,O,o));let t=-1,n=-1;for(let o=0;o<e.length;o+=1)-1===t&&e[o]!==l[o]&&(t=o),-1===n&&e[e.length-o-1]!==l[l.length-o-1]&&(n=o);const r=$[S];if(t<r.start||e.length-n-1>r.end)return;const a=l.length-e.length+r.end-j(r.endSeparator||"").length;s=l.slice(r.start+j(r.startSeparator||"").length,a)}if(0===s.length)return C()&&A(a),I(),void b();x({keyPressed:s,sectionIndex:S})})),K=t.useMemo((()=>void 0!==p?p:v.getV6InputValueFromSections(P(V.emptyValue),O,o)),[p,v,P,V.emptyValue,O,o]),q=t.useMemo((()=>h.tempValueStrAndroid??v.getV6InputValueFromSections(h.sections,O,o)),[h.sections,v,h.tempValueStrAndroid,O,o]);t.useEffect((()=>(z.current&&z.current===F(document)&&k("all"),()=>{clearTimeout(a.current),clearTimeout(l.current)})),[]);const X=t.useMemo((()=>null==S||"letter"===h.sections[S].contentType?"text":"numeric"),[S,h.sections]),W=z.current&&z.current===F(document);return{interactions:N,returnedValue:{readOnly:f,onBlur:H,onClick:Q,onFocus:B,onPaste:G,inputRef:L,enableAccessibleFieldDOMStructure:!1,placeholder:K,inputMode:X,autoComplete:"off",value:!W&&R?"":q,onChange:U}}},G=s=>{const i=r(),{internalProps:c,internalProps:{unstableFieldRef:u,minutesStep:d,enableAccessibleFieldDOMStructure:V=!1,disabled:x=!1,readOnly:I=!1},forwardedProps:{onKeyDown:D,error:T,clearable:M,onClear:b},fieldValueManager:F,valueManager:A,validator:k}=s,C=n(),E=(s=>{const i=r(),c=o(),u=a(),d=n(),{valueManager:y,fieldValueManager:V,valueType:x,validator:I,internalProps:D,internalProps:{value:T,defaultValue:M,referenceDate:b,onChange:F,format:w,formatDensity:A="dense",selectedSections:k,onSelectedSectionsChange:C,shouldRespectLeadingZeros:E=!1,timezone:P,enableAccessibleFieldDOMStructure:R=!1}}=s,{timezone:O,value:z,handleValueChange:L}=l({timezone:P,value:T,defaultValue:M,referenceDate:b,onChange:F,valueManager:y}),N=t.useMemo((()=>p(i)),[i]),Z=t.useMemo((()=>f(i,N,O)),[i,N,O]),B=t.useCallback(((e,t=null)=>V.getSectionsFromValue(i,e,t,(e=>$({utils:i,localeText:c,localizedDigits:N,format:w,date:e,formatDensity:A,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:R,isRtl:d})))),[V,w,c,N,d,E,i,A,R]),[j,Q]=t.useState((()=>{const t=B(z),n={sections:t,value:z,referenceValue:y.emptyValue,tempValueStrAndroid:null},r=m(t),o=y.getInitialReferenceValue({referenceDate:b,value:z,utils:i,props:D,granularity:r,timezone:O});return e({},n,{referenceValue:o})})),[G,H]=g({controlled:k,default:null,name:"useField",state:"selectedSections"}),U=e=>{H(e),null==C||C(e)},K=t.useMemo((()=>S(G,j.sections)),[G,j.sections]),q="all"===K?0:K,X=({value:t,referenceValue:n,sections:r})=>{if(Q((o=>e({},o,{sections:r,value:t,referenceValue:n,tempValueStrAndroid:null}))),y.areValuesEqual(i,j.value,t))return;const o={validationError:I({adapter:u,value:t,timezone:O,props:D})};L(t,o)},W=(t,n)=>{const r=[...j.sections];return r[t]=e({},r[t],{value:n,modified:!0}),r};return t.useEffect((()=>{const t=B(j.value);Q((n=>e({},n,{sections:t})))}),[w,i.locale,d]),t.useEffect((()=>{let t;t=!y.areValuesEqual(i,j.value,z)||y.getTimezone(i,j.value)!==y.getTimezone(i,z),t&&Q((t=>e({},t,{value:z,referenceValue:V.updateReferenceValue(i,z,t.referenceValue),sections:B(z)})))}),[z]),{state:j,activeSectionIndex:q,parsedSelectedSections:K,setSelectedSections:U,clearValue:()=>{X({value:y.emptyValue,referenceValue:j.referenceValue,sections:B(y.emptyValue)})},clearActiveSection:()=>{if(null==q)return;const t=j.sections[q],n=V.getActiveDateManager(i,j,t),r=n.getSections(j.sections).filter((e=>""!==e.value)).length===(""===t.value?0:1),o=W(q,""),a=r?null:i.getInvalidDate(),l=n.getNewValuesFromNewActiveDate(a);X(e({},l,{sections:o}))},updateSectionValue:({activeSection:t,newSectionValue:n,shouldGoToNextSection:r})=>{r&&q<j.sections.length-1&&U(q+1);const o=V.getActiveDateManager(i,j,t),a=W(q,n),l=o.getSections(a),s=h(i,l,N);let c,u;if(null!=s&&i.isValid(s)){const e=v(i,s,l,o.referenceDate,!0);c=o.getNewValuesFromNewActiveDate(e),u=!0}else c=o.getNewValuesFromNewActiveDate(s),u=(null!=s&&!i.isValid(s))!=(null!=o.date&&!i.isValid(o.date));return u?X(e({},c,{sections:a})):Q((t=>e({},t,c,{sections:a,tempValueStrAndroid:null})))},updateValueFromValueStr:e=>{const t=V.parseValueStr(e,j.referenceValue,((e,t)=>{const n=i.parse(e,w);if(null==n||!i.isValid(n))return null;const r=$({utils:i,localeText:c,localizedDigits:N,format:w,date:n,formatDensity:A,shouldRespectLeadingZeros:E,enableAccessibleFieldDOMStructure:R,isRtl:d});return v(i,n,r,t,!1)})),n=V.updateReferenceValue(i,t,j.referenceValue);X({value:t,referenceValue:n,sections:B(t,j.sections)})},setTempAndroidValueStr:t=>Q((n=>e({},n,{tempValueStrAndroid:t}))),getSectionsFromValue:B,sectionsValueBoundaries:Z,localizedDigits:N,timezone:O}})(s),{state:z,activeSectionIndex:L,parsedSelectedSections:N,setSelectedSections:j,clearValue:G,clearActiveSection:H,updateSectionValue:U,setTempAndroidValueStr:K,sectionsValueBoundaries:q,localizedDigits:X,timezone:W}=E,Y=Z({sections:z.sections,updateSectionValue:U,sectionsValueBoundaries:q,localizedDigits:X,setTempAndroidValueStr:K,timezone:W}),{resetCharacterQuery:_}=Y,J=A.areValuesEqual(i,z.value,A.emptyValue),ee=V?B:Q,te=t.useMemo((()=>P(z.sections,C&&!V)),[z.sections,C,V]),{returnedValue:ne,interactions:re}=ee(e({},s,E,Y,{areAllSectionsEmpty:J,sectionOrder:te})),oe=y((e=>{if(null==D||D(e),!x)switch(!0){case(e.ctrlKey||e.metaKey)&&"A"===String.fromCharCode(e.keyCode)&&!e.shiftKey&&!e.altKey:e.preventDefault(),j("all");break;case"ArrowRight"===e.key:if(e.preventDefault(),null==N)j(te.startIndex);else if("all"===N)j(te.endIndex);else{const e=te.neighbors[N].rightIndex;null!==e&&j(e)}break;case"ArrowLeft"===e.key:if(e.preventDefault(),null==N)j(te.endIndex);else if("all"===N)j(te.startIndex);else{const e=te.neighbors[N].leftIndex;null!==e&&j(e)}break;case"Delete"===e.key:if(e.preventDefault(),I)break;null==N||"all"===N?G():H(),_();break;case["ArrowUp","ArrowDown","Home","End","PageUp","PageDown"].includes(e.key):{if(e.preventDefault(),I||null==L)break;"all"===N&&j(L);const t=z.sections[L],n=F.getActiveDateManager(i,z,t),r=R(i,W,t,e.key,q,X,n.date,{minutesStep:d});U({activeSection:t,newSectionValue:r,shouldGoToNextSection:!1});break}}}));w((()=>{re.syncSelectionToDOM()}));const{hasValidationError:ae}=O({props:c,validator:k,timezone:W,value:z.value,onError:c.onError}),le=t.useMemo((()=>void 0!==T?T:ae),[ae,T]);t.useEffect((()=>{le||null!=L||_()}),[z.referenceValue,L,le]),t.useEffect((()=>{null!=z.tempValueStrAndroid&&null!=L&&(_(),H())}),[z.sections]),t.useImperativeHandle(u,(()=>({getSections:()=>z.sections,getActiveSectionIndex:re.getActiveSectionIndexFromDOM,setSelectedSections:re.setSelectedSections,focusField:re.focusField,isFieldFocused:re.isFieldFocused})));const se={onKeyDown:oe,onClear:y(((e,...t)=>{e.preventDefault(),null==b||b(e,...t),G(),re.isFieldFocused()?j(te.startIndex):re.focusField(0)})),error:le,clearable:Boolean(M&&!J&&!I&&!x)},ie={disabled:x,readOnly:I};return e({},s.forwardedProps,se,ie,ne)};export{G as u};
