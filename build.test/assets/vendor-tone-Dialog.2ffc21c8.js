import{_ as e,i as n,j as t}from"./vendor-tone-esm.8edb30e2.js";import{r as o}from"./vendor-react-core.73efc664.js";import{c as r}from"./vendor-tone-classnames.ea5eadd4.js";import{ae as a,af as s,ag as i,ah as c,aa as l}from"./vendor-tone-util.a79eb63f.js";import{C as m}from"./vendor-tone-es.9387ac1c.js";import{C as u}from"./vendor-tone-Content.9808c346.js";function f(t){var a=t.prefixCls,s=t.style,i=t.visible,c=t.maskProps,l=t.motionName;return o.createElement(m,{key:"mask",visible:i,motionName:l,leavedClassName:"".concat(a,"-mask-hidden")},(function(t,i){var l=t.className,m=t.style;return o.createElement("div",e({ref:i,style:n(n({},m),s),className:r("".concat(a,"-mask"),l)},c))}))}function d(m){var d=m.prefixCls,v=void 0===d?"rc-dialog":d,p=m.zIndex,C=m.visible,k=void 0!==C&&C,y=m.keyboard,N=void 0===y||y,E=m.focusTriggerAfterClose,b=void 0===E||E,x=m.wrapStyle,g=m.wrapClassName,j=m.wrapProps,h=m.onClose,w=m.afterClose,T=m.transitionName,I=m.animation,P=m.closable,R=void 0===P||P,S=m.mask,A=void 0===S||S,z=m.maskTransitionName,D=m.maskAnimation,K=m.maskClosable,M=void 0===K||K,U=m.maskStyle,B=m.maskProps,F=m.rootClassName,V=o.useRef(),_=o.useRef(),q=o.useRef(),G=o.useState(k),H=t(G,2),J=H[0],L=H[1],O=a();function Q(e){null==h||h(e)}var W=o.useRef(!1),X=o.useRef(),Y=null;return M&&(Y=function(e){W.current?W.current=!1:_.current===e.target&&Q(e)}),o.useEffect((function(){k&&(L(!0),c(_.current,document.activeElement)||(V.current=document.activeElement))}),[k]),o.useEffect((function(){return function(){clearTimeout(X.current)}}),[]),o.createElement("div",e({className:r("".concat(v,"-root"),F)},s(m,{data:!0})),o.createElement(f,{prefixCls:v,visible:A&&k,motionName:i(v,z,D),style:n({zIndex:p},U),maskProps:B}),o.createElement("div",e({tabIndex:-1,onKeyDown:function(e){if(N&&e.keyCode===l.ESC)return e.stopPropagation(),void Q(e);k&&e.keyCode===l.TAB&&q.current.changeActive(!e.shiftKey)},className:r("".concat(v,"-wrap"),g),ref:_,onClick:Y,style:n(n({zIndex:p},x),{},{display:J?null:"none"})},j),o.createElement(u,e({},m,{onMouseDown:function(){clearTimeout(X.current),W.current=!0},onMouseUp:function(){X.current=setTimeout((function(){W.current=!1}))},ref:q,closable:R,ariaId:O,prefixCls:v,visible:k&&J,onClose:Q,onVisibleChanged:function(e){if(e)c(_.current,document.activeElement)||null===(n=q.current)||void 0===n||n.focus();else{if(L(!1),A&&V.current&&b){try{V.current.focus({preventScroll:!0})}catch(t){}V.current=null}J&&(null==w||w())}var n},motionName:i(v,T,I)}))))}export{d as D};
